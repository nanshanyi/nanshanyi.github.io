<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[iOS开发10个使用小技巧]]></title>
      <url>http://nanshanyi.github.io/2016/06/27/xiaojiqiao/</url>
      <content type="html"><![CDATA[<p>&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4EEC;&#x603B;&#x4F1A;&#x9047;&#x5230;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x6709;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x5E76;&#x4E0D;&#x662F;&#x5341;&#x5206;&#x5BB9;&#x6613;&#x89E3;&#x51B3;&#x3002;&#x5728;&#x6B64;&#x6211;&#x5C31;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#xFF0C;&#x6211;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x5404;&#x79CD;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x53CA;&#x6211;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;&#x6BD4;&#x8F83;&#x666E;&#x904D;&#x7684;&#x6211;&#x5C31;&#x4E0D;&#x518D;&#x63D0;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8BB2;&#x4E00;&#x4E9B;&#x4F60;&#x53EF;&#x80FD;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x4F60;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5927;&#x795E;&#x5C31;&#x4E0D;&#x5FC5;&#x5F80;&#x4E0B;&#x770B;&#x4E86;&#xFF09;</p>
<h4 id="&#x63A7;&#x4EF6;&#x7684;&#x5C40;&#x90E8;&#x5706;&#x89D2;&#x95EE;&#x9898;"><a href="#&#x63A7;&#x4EF6;&#x7684;&#x5C40;&#x90E8;&#x5706;&#x89D2;&#x95EE;&#x9898;" class="headerlink" title="&#x63A7;&#x4EF6;&#x7684;&#x5C40;&#x90E8;&#x5706;&#x89D2;&#x95EE;&#x9898;"></a>&#x63A7;&#x4EF6;&#x7684;&#x5C40;&#x90E8;&#x5706;&#x89D2;&#x95EE;&#x9898;</h4><p>&#x3000;&#x3000;&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x4E5F;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x4E2A;button&#x6216;&#x8005;label&#xFF0C;&#x53EA;&#x8981;&#x53F3;&#x8FB9;&#x7684;&#x4E24;&#x4E2A;&#x89D2;&#x5706;&#x89D2;&#xFF0C;&#x6216;&#x8005;&#x53EA;&#x8981;&#x4E00;&#x4E2A;&#x5706;&#x89D2;&#x3002;&#x8BE5;&#x600E;&#x4E48;&#x529E;&#x5462;&#x3002;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x56FE;&#x5C42;&#x8499;&#x7248;&#x6765;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x4E86;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CGRect rect = CGRectMake(0, 0, 100, 50);</span><br><span class="line">CGSize radio = CGSizeMake(5, 5);//&#x5706;&#x89D2;&#x5C3A;&#x5BF8;</span><br><span class="line">UIRectCorner corner = UIRectCornerTopLeft|UIRectCornerTopRight;//&#x8FD9;&#x53EA;&#x5706;&#x89D2;&#x4F4D;&#x7F6E;</span><br><span class="line">UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:corner cornerRadii:radio];</span><br><span class="line">CAShapeLayer *masklayer = [[CAShapeLayer alloc]init];//&#x521B;&#x5EFA;shapelayer</span><br><span class="line">masklayer.frame = button.bounds;</span><br><span class="line">masklayer.path = path.CGPath;//&#x8BBE;&#x7F6E;&#x8DEF;&#x5F84;</span><br><span class="line">button.layer.mask = masklayer;</span><br></pre></td></tr></table></figure></p>
<p>&#x4E3E;&#x4F8B;&#x4E3A;button&#xFF0C;&#x5176;&#x5B83;&#x7EE7;&#x627F;&#x81EA;UIView&#x7684;&#x63A7;&#x4EF6;&#x90FD;&#x53EF;&#x4EE5;</p>
<h4 id="navigationBar&#x7684;&#x900F;&#x660E;&#x95EE;&#x9898;"><a href="#navigationBar&#x7684;&#x900F;&#x660E;&#x95EE;&#x9898;" class="headerlink" title="navigationBar&#x7684;&#x900F;&#x660E;&#x95EE;&#x9898;"></a>navigationBar&#x7684;&#x900F;&#x660E;&#x95EE;&#x9898;</h4><p>&#x3000;&#x3000;&#x5982;&#x679C;&#x4EC5;&#x4EC5;&#x628A;navigationBar&#x7684;alpha&#x8BBE;&#x4E3A;0&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x628A;navigationBar&#x7ED9;&#x9690;&#x85CF;&#x4E86;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x7236;&#x89C6;&#x56FE;&#x7684;alpha&#x8BBE;&#x7F6E;&#x4E3A;0&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5B50;&#x89C6;&#x56FE;&#x5168;&#x90FD;&#x4F1A;&#x900F;&#x660E;&#x7684;&#x3002;&#x90A3;&#x4E48;&#x76F8;&#x5E94;&#x7684;navigationBar&#x7684;&#x6807;&#x9898;&#x548C;&#x5DE6;&#x53F3;&#x4E24;&#x4E2A;&#x6309;&#x94AE;&#x90FD;&#x4F1A;&#x6D88;&#x5931;&#x3002;&#x8FD9;&#x6837;&#x663E;&#x7136;&#x8FBE;&#x4E0D;&#x5230;&#x6211;&#x4EEC;&#x8981;&#x6C42;&#x7684;&#x6548;&#x679C;&#x3002;<br>&#x3000;&#x3000;&#xFF08;1&#xFF09;&#x5982;&#x679C;&#x4EC5;&#x4EC5;&#x662F;&#x60F3;&#x8981;navigationBar&#x900F;&#x660E;&#xFF0C;&#x6309;&#x94AE;&#x548C;&#x6807;&#x9898;&#x90FD;&#x5728;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    [self.navigationController.navigationBar setBackgroundImage:[UIImage new]</span><br><span class="line">forBarMetrics:UIBarMetricsDefault];//&#x7ED9;navigationBar&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x80CC;&#x666F;&#x56FE;&#x7247;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x900F;&#x660E;&#xFF0C;&#x800C;&#x4E14;&#x6807;&#x9898;&#x6309;&#x94AE;&#x90FD;&#x5728;</span><br></pre></td></tr></table></figure></p>
<p>&#x7EC6;&#x5FC3;&#x7684;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x6709;&#x4E00;&#x6761;&#x7EBF;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="http://upload-images.jianshu.io/upload_images/966908-3b7d38b83a9e353c.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0025.PNG"><br>&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x505A;&#x8FDB;&#x4E00;&#x6B65;&#x5904;&#x7406;&#xFF0C;&#x628A;&#x7EBF;&#x53BB;&#x6389;&#xFF0C;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.navigationController.navigationBar.shadowImage = [UIImage new];</span><br><span class="line">//&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x7EBF;&#x4E5F;&#x662F;image&#x63A7;&#x5236;&#x7684;&#x3002;&#x8BBE;&#x4E3A;&#x7A7A;&#x5373;&#x53EF;</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#xFF08;2&#xFF09;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x5728;&#x900F;&#x660E;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x6839;&#x636E;&#x4E0B;&#x62C9;&#x8DDD;&#x79BB;&#xFF0C;&#x7531;&#x900F;&#x660E;&#x53D8;&#x5F97;&#x4E0D;&#x900F;&#x660E;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x90A3;&#x4E48;&#x4E0A;&#x9762;&#x90A3;&#x4E2A;&#x5C31;&#x663E;&#x5F97;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;&#x4E86;&#xFF0C;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x4E86;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//navigationBar&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x89C6;&#x56FE;&#xFF0C;&#x5B83;&#x662F;&#x6709;&#x8BB8;&#x591A;&#x4E2A;&#x63A7;&#x4EF6;&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4ECE;&#x4ED6;&#x7684;&#x5185;&#x90E8;&#x5165;&#x624B;</span><br><span class="line">[[self.navigationController.navigationBar subviews] objectAtIndex:0].alpha = 0;//&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6839;&#x636E;scrollView&#x7684;&#x504F;&#x79FB;&#x91CF;&#x6765;&#x8BBE;&#x7F6E;alpha&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x6E10;&#x53D8;&#x900F;&#x660E;&#x7684;&#x6548;&#x679C;</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x5168;&#x5C40;&#x8BBE;&#x7F6E;navigationBar&#x6807;&#x9898;&#x7684;&#x6837;&#x5F0F;&#x548C;barItem&#x7684;&#x6807;&#x9898;&#x6837;&#x5F0F;"><a href="#&#x5168;&#x5C40;&#x8BBE;&#x7F6E;navigationBar&#x6807;&#x9898;&#x7684;&#x6837;&#x5F0F;&#x548C;barItem&#x7684;&#x6807;&#x9898;&#x6837;&#x5F0F;" class="headerlink" title="&#x5168;&#x5C40;&#x8BBE;&#x7F6E;navigationBar&#x6807;&#x9898;&#x7684;&#x6837;&#x5F0F;&#x548C;barItem&#x7684;&#x6807;&#x9898;&#x6837;&#x5F0F;"></a>&#x5168;&#x5C40;&#x8BBE;&#x7F6E;navigationBar&#x6807;&#x9898;&#x7684;&#x6837;&#x5F0F;&#x548C;barItem&#x7684;&#x6807;&#x9898;&#x6837;&#x5F0F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//UIColorWithHexRGB( )&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x9700;&#x8981;&#x7ED9;&#x4E2A;&#x989C;&#x8272;&#x5C31;&#x597D;&#x4E86;</span><br><span class="line"> [[UINavigationBar appearance] setBarTintColor:UIColorWithHexRGB(0xfefefe)];</span><br><span class="line"></span><br><span class="line">    [[UINavigationBar appearance] setTitleTextAttributes:@{NSFontAttributeName:[UIFont boldSystemFontOfSize:18],NSForegroundColorAttributeName:UIColorWithHexRGB(0xfe6d27)}];</span><br><span class="line"></span><br><span class="line">    [[UITabBarItem appearance] setTitleTextAttributes:@{NSFontAttributeName : [UIFont boldSystemFontOfSize:10],NSForegroundColorAttributeName : UIColorWithHexRGB(0x666666)} forState:UIControlStateNormal];</span><br><span class="line"></span><br><span class="line">    [[UITabBarItem appearance] setTitleTextAttributes:@{NSFontAttributeName : [UIFont boldSystemFontOfSiz</span><br></pre></td></tr></table></figure>
<h4 id="navigationBar&#x9690;&#x85CF;&#x663E;&#x793A;&#x7684;&#x8FC7;&#x5EA6;"><a href="#navigationBar&#x9690;&#x85CF;&#x663E;&#x793A;&#x7684;&#x8FC7;&#x5EA6;" class="headerlink" title="navigationBar&#x9690;&#x85CF;&#x663E;&#x793A;&#x7684;&#x8FC7;&#x5EA6;"></a>navigationBar&#x9690;&#x85CF;&#x663E;&#x793A;&#x7684;&#x8FC7;&#x5EA6;</h4><p>  &#x3000;&#x3000;&#x76F8;&#x4FE1;&#x5728;&#x4F7F;&#x7528;&#x4E2D;&#x80AF;&#x5B9A;&#x9047;&#x5230;&#x8FC7;&#xFF0C;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x9690;&#x85CF;navigationBar&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x4E0D;&#x9690;&#x85CF;&#x3002;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x8FDB;&#x884C;push&#x548C;pop&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x6709;&#x4FA7;&#x6ED1;&#x624B;&#x52BF;&#x8FD4;&#x56DE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x505A;&#x5904;&#x7406;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x6ED1;&#x52A8;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;navigationBar&#x4F4D;&#x7F6E;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x9ED1;&#x8272;&#x6216;&#x8005;&#x663E;&#x793A;&#x4E0B;&#x9762;&#x4E00;&#x5C42;&#x89C6;&#x56FE;&#xFF0C;&#x5F88;&#x96BE;&#x770B;&#x3002;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x52A0;&#x5165;&#x8FC7;&#x5EA6;&#x52A8;&#x753B;&#x6765;&#x9690;&#x85CF;&#x6216;&#x663E;&#x793A;navigationBar&#xFF1A;<br>&#x5728;&#x8FD4;&#x56DE;&#x540E;&#x5C06;&#x8981;&#x51FA;&#x73B0;&#x7684;&#x9875;&#x9762;&#x5B9E;&#x73B0;viewWillAppear&#x65B9;&#x6CD5;&#xFF0C;&#x9700;&#x8981;&#x9690;&#x85CF;&#x5C31;&#x8BBE;&#x4E3A;YES&#xFF0C;&#x9700;&#x8981;&#x663E;&#x793A;&#x5C31;&#x8BBE;&#x4E3A;NO<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewWillAppear:(BOOL)animated{</span><br><span class="line">    [super viewWillAppear:animated];</span><br><span class="line">    [self.navigationController setNavigationBarHidden:NO animated:YES];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x4FA7;&#x6ED1;&#x624B;&#x52BF;&#x8FD4;&#x56DE;"><a href="#&#x4FA7;&#x6ED1;&#x624B;&#x52BF;&#x8FD4;&#x56DE;" class="headerlink" title="&#x4FA7;&#x6ED1;&#x624B;&#x52BF;&#x8FD4;&#x56DE;"></a>&#x4FA7;&#x6ED1;&#x624B;&#x52BF;&#x8FD4;&#x56DE;</h4><p>  &#x3000;&#x3000;iOS&#x7684;&#x4FA7;&#x6ED1;&#x8FD4;&#x56DE;&#x624B;&#x52BF;&#x6709;&#x7740;&#x5F88;&#x597D;&#x7684;&#x64CD;&#x4F5C;&#x4F53;&#x9A8C;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x4FA7;&#x6ED1;&#x8FD4;&#x56DE;&#x7684;&#x5E94;&#x7528;&#x7EDD;&#x5BF9;&#x4E0D;&#x662F;&#x597D;&#x5E94;&#x7528;&#x3002;&#x4F46;&#x662F;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x8FD4;&#x56DE;&#x6309;&#x94AE;&#xFF0C;&#x6216;&#x8005;&#x67D0;&#x4E9B;webView,tableView&#x7B49;&#x9875;&#x9762;&#xFF0C;&#x4FA7;&#x6ED1;&#x8FD4;&#x56DE;&#x624B;&#x52BF;&#x5931;&#x6548;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x6765;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E0B;&#x4E86;,&#x53EF;&#x4EE5;&#x5728;&#x57FA;&#x7C7B;&#x91CC;&#x9762;&#x534F;&#x5546;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    if ([self.navigationController respondsToSelector:@selector(interactivePopGestureRecognizer)]) {</span><br><span class="line">//&#x9700;&#x8981;&#x9075;&#x5FAA;&#x4E00;&#x4E0B;&#x624B;&#x52BF;&#x7684;&#x4EE3;&#x7406;</span><br><span class="line">       self.navigationController.interactivePopGestureRecognizer.delegate = self;</span><br><span class="line">        self.navigationController.interactivePopGestureRecognizer.enabled = YES;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure></p>
<p>  &#x3000;&#x3000;&#x95EE;&#x9898;&#xFF1A;&#x5F53;&#x8FD4;&#x56DE;navigationController&#x7684;&#x6700;&#x9876;&#x5C42;&#x7684;Controller&#x7684;&#x65F6;&#x5019;&#x3002;&#x518D;&#x6B21;&#x4FA7;&#x6ED1;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4F60;&#x5728;&#x70B9;&#x51FB;&#x4E00;&#x4E2A;push&#x9875;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5361;&#x90A3;&#x4E86;&#xFF0C;&#x534A;&#x5929;&#x624D;&#x4F1A;&#x6709;&#x53CD;&#x5E94;&#x3002;<br>  &#x3000;&#x3000;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#xFF0C;&#x5728;&#x6700;&#x9876;&#x5C42;Controller&#x624B;&#x52BF;&#x4F9D;&#x7136;&#x6709;&#x6548;&#xFF0C;&#x4F46;&#x662F;&#x6ED1;&#x52A8;&#x540E;&#xFF0C;&#x5E76;&#x627E;&#x4E0D;&#x5230;&#x8FD4;&#x56DE;&#x7684;&#x9875;&#x9762;&#x3002;&#x9020;&#x6210;&#x8F6F;&#x4EF6;&#x5361;&#x987F;&#xFF0C;&#x5047;&#x6B7B;&#x6240;&#x4EE5;&#x5C31;&#x8981;&#x5728;rootViewController&#x4E2D;&#x8BA9;&#x6B64;&#x624B;&#x52BF;&#x5931;&#x6548;&#x3002;&#x628A;&#x4E0B;&#x9762;&#x7684;&#x8BBE;&#x4E3A;NO<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//&#x8BB0;&#x5F97;&#x5199;&#x5728;didAppear&#x91CC;&#x9762;</span><br><span class="line">- (void)viewDidAppear:(BOOL)animated{</span><br><span class="line">    self.navigationController.interactivePopGestureRecognizer.enabled = NO;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>  &#x3000;&#x3000;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF0C;&#x5199;&#x7684;&#x76F8;&#x5F53;&#x68D2;&#x3002;&#x4ED6;&#x5BF9;&#x7CFB;&#x7EDF;&#x7684;&#x4FA7;&#x6ED1;&#x8FD4;&#x56DE;&#x624B;&#x52BF;&#x8FDB;&#x884C;&#x62D3;&#x5C55;&#xFF0C;&#x4E0D;&#x7528;&#x4ECE;&#x8FB9;&#x7F18;&#x6ED1;&#x52A8;&#xFF0C;&#x53EA;&#x8981;&#x53F3;&#x6ED1;&#x5373;&#x53EF;&#x8FD4;&#x56DE;&#x3002;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;&#x4ED6;&#x53EA;&#x9700;&#x8981;&#x52A0;&#x5165;&#x9879;&#x76EE;&#x4E2D;&#x5373;&#x53EF;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x3002;&#x9644;&#x4E0A;<a href="https://github.com/forkingdog/FDFullscreenPopGesture" target="blank">github &#x7F51;&#x5740;</a></p>
<h4 id="&#x7ED9;webView&#x6DFB;&#x52A0;&#x5934;&#x89C6;&#x56FE;"><a href="#&#x7ED9;webView&#x6DFB;&#x52A0;&#x5934;&#x89C6;&#x56FE;" class="headerlink" title="&#x7ED9;webView&#x6DFB;&#x52A0;&#x5934;&#x89C6;&#x56FE;"></a>&#x7ED9;webView&#x6DFB;&#x52A0;&#x5934;&#x89C6;&#x56FE;</h4><p>webView&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x89C6;&#x56FE;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x6709;&#x4E00;&#x4E2A;scrollView&#xFF0C;scrollView&#x91CC;&#x9762;&#x662F;&#x4E00;&#x4E2A;UIWebBrowserView&#xFF08;&#x8D1F;&#x8D23;&#x663E;&#x793A;WebView&#x7684;&#x5185;&#x5BB9;&#xFF09;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UIView *webBrowserView = self.webView.scrollView.subviews[0];//&#x62FF;&#x5230;webView&#x7684;webBrowserView</span><br><span class="line">    self.backHeadImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, kScreenWidth, kScreenWidth*2/3.0)];</span><br><span class="line">    [_backHeadImageView sd_setImageWithURL:[NSURL URLWithString:self.imageUrl] placeholderImage:[UIImage imageNamed:@&quot;placeholderImage&quot;]];</span><br><span class="line">    [self.webView insertSubview:_backHeadImageView belowSubview:self.webView.scrollView];</span><br><span class="line">    //&#x628A;backHeadImageView&#x63D2;&#x5165;&#x5230;webView&#x7684;scrollView&#x4E0B;&#x9762;</span><br><span class="line">    CGRect frame = self.webBrowserView.frame;</span><br><span class="line">    frame.origin.y = CGRectGetMaxY(_backHeadImageView.frame);</span><br><span class="line">    self.webBrowserView.frame = frame;</span><br><span class="line">    //&#x66F4;&#x6539;webBrowserView&#x7684;frame&#x5411;&#x4E0B;&#x79FB;backHeadImageView&#x7684;&#x9AD8;&#x5EA6;&#xFF0C;&#x4F7F;&#x5176;&#x53EF;&#x89C1;</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x6A21;&#x6001;&#x8DF3;&#x8F6C;&#x7684;&#x52A8;&#x753B;&#x8BBE;&#x7F6E;"><a href="#&#x6A21;&#x6001;&#x8DF3;&#x8F6C;&#x7684;&#x52A8;&#x753B;&#x8BBE;&#x7F6E;" class="headerlink" title="&#x6A21;&#x6001;&#x8DF3;&#x8F6C;&#x7684;&#x52A8;&#x753B;&#x8BBE;&#x7F6E;"></a>&#x6A21;&#x6001;&#x8DF3;&#x8F6C;&#x7684;&#x52A8;&#x753B;&#x8BBE;&#x7F6E;</h4><p>  &#x3000;&#x3000;&#x8BBE;&#x7F6E;&#x6A21;&#x6001;&#x8DF3;&#x8F6C;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x56DB;&#x79CD;&#x53EF;&#x4F9B;&#x9009;&#x62E9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DetailViewController *detailVC = [[DetailViewController alloc]init];</span><br><span class="line">//UIModalTransitionStyleFlipHorizontal &#x7FFB;&#x8F6C;</span><br><span class="line">//UIModalTransitionStyleCoverVertical &#x5E95;&#x90E8;&#x6ED1;&#x51FA;</span><br><span class="line">//UIModalTransitionStyleCrossDissolve &#x6E10;&#x663E;</span><br><span class="line">//UIModalTransitionStylePartialCurl &#x7FFB;&#x9875;</span><br><span class="line">detailVC.modalTransitionStyle = UIModalTransitionStylePartialCurl;</span><br><span class="line">[self presentViewController:detailVC animated:YES completion:nil];</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x56FE;&#x7247;&#x5904;&#x7406;&#x53EA;&#x62FF;&#x5230;&#x56FE;&#x7247;&#x7684;&#x4E00;&#x90E8;&#x5206;"><a href="#&#x56FE;&#x7247;&#x5904;&#x7406;&#x53EA;&#x62FF;&#x5230;&#x56FE;&#x7247;&#x7684;&#x4E00;&#x90E8;&#x5206;" class="headerlink" title="&#x56FE;&#x7247;&#x5904;&#x7406;&#x53EA;&#x62FF;&#x5230;&#x56FE;&#x7247;&#x7684;&#x4E00;&#x90E8;&#x5206;"></a>&#x56FE;&#x7247;&#x5904;&#x7406;&#x53EA;&#x62FF;&#x5230;&#x56FE;&#x7247;&#x7684;&#x4E00;&#x90E8;&#x5206;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:filename];</span><br><span class="line">CGImageRef imageRef = image.CGImage;</span><br><span class="line">CGRect rect = CGRectMake(origin.x, origin.y ,size.width, size.height);</span><br><span class="line">//&#x8FD9;&#x91CC;&#x7684;&#x5BBD;&#x9AD8;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x7684;&#x771F;&#x5B9E;&#x5927;&#x5C0F;</span><br><span class="line">//&#x6BD4;&#x5982;&#x4F60;&#x7684;&#x56FE;&#x7247;&#x662F;400x400&#x7684;&#x90A3;&#x4E48;&#xFF08;0&#xFF0C;0&#xFF0C;400&#xFF0C;400&#xFF09;&#x5C31;&#x662F;&#x56FE;&#x7247;&#x7684;&#x5168;&#x5C3A;&#x5BF8;&#xFF0C;&#x60F3;&#x53D6;&#x54EA;&#x4E00;&#x90E8;&#x5206;&#x5C31;&#x8BBE;&#x7F6E;&#x76F8;&#x5E94;&#x5750;&#x6807;&#x5373;&#x53EF;</span><br><span class="line">CGImageRef imageRefRect = CGImageCreateWithImageInRect(imageRef, rect);</span><br><span class="line">UIImage *imageRect = [[UIImage alloc] initWithCGImage:imageRefRect];</span><br></pre></td></tr></table></figure>
<h4 id="&#x7ED9;UIView&#x8BBE;&#x7F6E;&#x56FE;&#x7247;"><a href="#&#x7ED9;UIView&#x8BBE;&#x7F6E;&#x56FE;&#x7247;" class="headerlink" title="&#x7ED9;UIView&#x8BBE;&#x7F6E;&#x56FE;&#x7247;"></a>&#x7ED9;UIView&#x8BBE;&#x7F6E;&#x56FE;&#x7247;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    UIImage *image = [UIImage imageNamed:@&quot;playing&quot;];</span><br><span class="line">    _layerView.layer.contents = (__bridge id)image.CGImage;</span><br><span class="line">_layerView.layer.contentsCenter = CGRectMake(0.25, 0.25, 0.5, 0.5);</span><br><span class="line">//&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x8303;&#x56F4;</span><br><span class="line">//&#x4E0D;&#x8FC7;&#x6B64;&#x5904;&#x7565;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x56DB;&#x4E2A;&#x503C;&#x5747;&#x4E3A;0-1&#x4E4B;&#x95F4;&#xFF1B;&#x5BF9;&#x5E94;&#x7684;&#x4F9D;&#x7136;&#x662F;&#x5199;x,y,widt,height</span><br></pre></td></tr></table></figure>
<h4 id="&#x7ED9;TableView&#x6216;&#x8005;CollectionView&#x7684;cell&#x6DFB;&#x52A0;&#x7B80;&#x5355;&#x52A8;&#x753B;&#xFF0C;&#x50CF;&#x8FD9;&#x6837;"><a href="#&#x7ED9;TableView&#x6216;&#x8005;CollectionView&#x7684;cell&#x6DFB;&#x52A0;&#x7B80;&#x5355;&#x52A8;&#x753B;&#xFF0C;&#x50CF;&#x8FD9;&#x6837;" class="headerlink" title="&#x7ED9;TableView&#x6216;&#x8005;CollectionView&#x7684;cell&#x6DFB;&#x52A0;&#x7B80;&#x5355;&#x52A8;&#x753B;&#xFF0C;&#x50CF;&#x8FD9;&#x6837;"></a>&#x7ED9;TableView&#x6216;&#x8005;CollectionView&#x7684;cell&#x6DFB;&#x52A0;&#x7B80;&#x5355;&#x52A8;&#x753B;&#xFF0C;&#x50CF;&#x8FD9;&#x6837;</h4><p><img src="http://upload-images.jianshu.io/upload_images/966908-4f826be8fca0bb4a.gif?imageMogr2/auto-orient/strip" alt="888.gif"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/966908-a6cf7dd499ba351e.gif?imageMogr2/auto-orient/strip" alt="555.gif"><br>&#x53EA;&#x8981;&#x5728;willDisplayCell&#x65B9;&#x6CD5;&#x4E2D;&#x5BF9;&#x5C06;&#x8981;&#x663E;&#x793A;&#x7684;cell&#x505A;&#x52A8;&#x753B;&#x5373;&#x53EF;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{</span><br><span class="line">    NSArray *array =  tableView.indexPathsForVisibleRows;</span><br><span class="line">    NSIndexPath *firstIndexPath = array[0];</span><br><span class="line"></span><br><span class="line">    //&#x8BBE;&#x7F6E;anchorPoint</span><br><span class="line">    cell.layer.anchorPoint = CGPointMake(0, 0.5);</span><br><span class="line">    //&#x4E3A;&#x4E86;&#x9632;&#x6B62;cell&#x89C6;&#x56FE;&#x79FB;&#x52A8;&#xFF0C;&#x91CD;&#x65B0;&#x628A;cell&#x653E;&#x56DE;&#x539F;&#x6765;&#x7684;&#x4F4D;&#x7F6E;</span><br><span class="line">    cell.layer.position = CGPointMake(0, cell.layer.position.y);</span><br><span class="line"></span><br><span class="line">    //&#x8BBE;&#x7F6E;cell &#x6309;&#x7167;z&#x8F74;&#x65CB;&#x8F6C;90&#x5EA6;&#xFF0C;&#x6CE8;&#x610F;&#x662F;&#x5F27;&#x5EA6;</span><br><span class="line">    if (firstIndexPath.row &lt; indexPath.row) {</span><br><span class="line">            cell.layer.transform = CATransform3DMakeRotation(M_PI_2, 0, 0, 1.0);</span><br><span class="line">    }else{</span><br><span class="line">        cell.layer.transform = CATransform3DMakeRotation(- M_PI_2, 0, 0, 1.0);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cell.alpha = 0.0;</span><br><span class="line"></span><br><span class="line">    [UIView animateWithDuration:1 animations:^{</span><br><span class="line">        cell.layer.transform = CATransform3DIdentity;</span><br><span class="line">        cell.alpha = 1.0;</span><br><span class="line">    }];</span><br><span class="line">}</span><br><span class="line">- (void)collectionView:(UICollectionView *)collectionView willDisplayCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath{</span><br><span class="line"></span><br><span class="line">    if (indexPath.row % 2 != 0) {</span><br><span class="line">        cell.transform = CGAffineTransformTranslate(cell.transform, kScreenWidth/2, 0);</span><br><span class="line">    }else{</span><br><span class="line">        cell.transform = CGAffineTransformTranslate(cell.transform, -kScreenWidth/2, 0);</span><br><span class="line">    }</span><br><span class="line">    cell.alpha = 0.0;</span><br><span class="line">    [UIView animateWithDuration:0.7 animations:^{</span><br><span class="line">        cell.transform = CGAffineTransformIdentity;</span><br><span class="line">        cell.alpha = 1.0;</span><br><span class="line">    } completion:^(BOOL finished) {</span><br><span class="line"></span><br><span class="line">    }];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5982;&#x9700;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF0C;&#x8BF7;&#x5C0A;&#x91CD;&#x4F5C;&#x8005;&#x7684;&#x52B3;&#x52A8;&#x6210;&#x679C;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo创建个人博客]]></title>
      <url>http://nanshanyi.github.io/2016/06/05/hexoBlog/</url>
      <content type="html"><![CDATA[<p>&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x89C1;&#x591A;&#x4E86;&#x5404;&#x79CD;&#x5927;v&#x7684;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4E5F;&#x60F3;&#x62E5;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#xFF0C;&#xFF08;&#x9759;&#x9759;&#x7684;&#x88C5;B&#xFF01;&#xFF09;&#x770B;&#x8FD9;&#x91CC;&#xFF0C;&#x5C31;&#x5BF9;&#x4E86;&#x3002;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x6559;&#x4F60;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x3002;<br>&#x3000;&#x3000;&#x73B0;&#x5728;&#x7528;&#x7684;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x5C31;&#x662F;<a href="https://hexo.io/zh-cn/" target="_blank" rel="external">hexo</a>&#xFF08;&#x5FEB;&#x901F;&#x3001;&#x7B80;&#x6D01;&#x4E14;&#x9AD8;&#x6548;&#x7684;&#x535A;&#x5BA2;&#x6846;&#x67B6;&#xFF09;&#xFF0C;&#x652F;&#x6301;markDown&#xFF0C;&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x63D2;&#x4EF6;&#x548C;&#x4E3B;&#x9898;</p>
<h3 id="&#x5B89;&#x88C5;&#x73AF;&#x5883;"><a href="#&#x5B89;&#x88C5;&#x73AF;&#x5883;" class="headerlink" title="&#x5B89;&#x88C5;&#x73AF;&#x5883;"></a>&#x5B89;&#x88C5;&#x73AF;&#x5883;</h3><p>&#x3000;&#x3000;&#x5B89;&#x88C5;<a href="https://git-scm.com/" target="_blank" rel="external">git</a> &#x548C; <a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a>,git&#x5C31;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x8FDE;git&#x90FD;&#x4E0D;&#x4F1A;&#x88C5;&#xFF0C;&#x8BF7;&#x51FA;&#x53BB;&#x628A;&#x95E8;&#x5173;&#x4E0A;&#x3002;<br>&#x3000;&#x3000;Node.js &#x7684;&#x5B89;&#x88C5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;1&#x3001;&#x70B9;&#x51FB;&#x524D;&#x9762;&#x94FE;&#x63A5;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5373;&#x53EF; 2&#x3001;&#x901A;&#x8FC7;&#x7EC8;&#x7AEF;&#x547D;&#x4EE4;&#x884C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh</span><br></pre></td></tr></table></figure></p>
<p>&#x4E4B;&#x540E;&#x91CD;&#x542F;&#x7EC8;&#x7AEF;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x627E;&#x4E0D;&#x5230;nvm&#x547D;&#x4EE4;&#x53EF;&#x5C1D;&#x8BD5;&#x91CD;&#x542F;&#x7535;&#x8111;<br>&#x63A5;&#x7740;&#x6267;&#x884C;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install 4</span><br></pre></td></tr></table></figure></p>
<p>&#x5373;&#x53EF;&#x5B89;&#x88C5;&#x5B8C;&#x6210;<br>&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x5DF2;&#x5177;&#x5907;&#x7684;&#x8BDD;&#xFF0C;&#x5373;&#x53EF;&#x5F00;&#x59CB;&#x5B89;&#x88C5;hexo&#x535A;&#x5BA2;&#x6846;&#x67B6;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;hexo&#x5C31;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#x7ED3;&#x675F;&#xFF0C;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x5B8C;&#x6BD5;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x4E86;<br><a id="more"></a></p>
<h3 id="github&#x4E0A;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;"><a href="#github&#x4E0A;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;" class="headerlink" title="github&#x4E0A;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;"></a>github&#x4E0A;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;</h3><p>&#x3000;&#x3000;github&#x5E10;&#x53F7;&#x7684;&#x521B;&#x5EFA;&#x6211;&#x4E5F;&#x4E0D;&#x518D;&#x6B21;&#x8D58;&#x8FF0;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x8BF4;&#x4E00;&#x4E0B;&#x4ED3;&#x5E93;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x540D;&#x5B57;&#x524D;&#x9762;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x968F;&#x4FBF;&#x8D77;&#x3002;&#x540E;&#x9762;&#x90E8;&#x5206;&#x7EDF;&#x4E00;&#x4E3A;github.io &#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x5747;&#x4E0D;&#x9700;&#x8BBE;&#x7F6E;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="http://upload-images.jianshu.io/upload_images/966908-31ea0d71b6effe97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-09 &#x4E0B;&#x5348;5.36.45.png"></p>
<h3 id="&#x535A;&#x5BA2;&#x7684;&#x521B;&#x5EFA;"><a href="#&#x535A;&#x5BA2;&#x7684;&#x521B;&#x5EFA;" class="headerlink" title="&#x535A;&#x5BA2;&#x7684;&#x521B;&#x5EFA;"></a>&#x535A;&#x5BA2;&#x7684;&#x521B;&#x5EFA;</h3><h4 id="&#x521D;&#x59CB;&#x5316;"><a href="#&#x521D;&#x59CB;&#x5316;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;"></a>&#x521D;&#x59CB;&#x5316;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /Desktop  //cd&#x5230;&#x4F60;&#x7684;&#x684C;&#x9762;&#x6267;&#x884C;&#xFF1A;&#xFF08;init &#x540E;&#x9762;&#x7684;&#x5C31;&#x662F;&#x4F60;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x8D77;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x7684;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#xFF09;</span><br><span class="line">$ hexo init nanshanyi.github.io</span><br></pre></td></tr></table></figure>
<p>&#x684C;&#x9762;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;nanshanyi.github.io</p>
<h4 id="&#x57FA;&#x7840;&#x914D;&#x7F6E;"><a href="#&#x57FA;&#x7840;&#x914D;&#x7F6E;" class="headerlink" title="&#x57FA;&#x7840;&#x914D;&#x7F6E;"></a>&#x57FA;&#x7840;&#x914D;&#x7F6E;</h4><p>&#x3000;&#x3000;&#x6253;&#x5F00;_config.yml&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x57FA;&#x7840;&#x914D;&#x7F6E;&#xFF08;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="http://www.sublimetext.com/" target="_blank" rel="external">sublime</a>&#x6216;&#x8005;<a href="https://atom.io/" target="_blank" rel="external">atom</a>&#x6765;&#x6253;&#x5F00;&#xFF0C;&#x90FD;&#x662F;&#x5F88;&#x5F88;&#x5F3A;&#x5927;&#x7684;&#x4EE3;&#x7801;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x53EF;&#x5B89;&#x88C5;&#x5404;&#x79CD;&#x63D2;&#x4EF6;&#xFF0C;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x5FC5;&#x5907;&#xFF09;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">title: &#x5357;&#x5C71;&#x4EBF;&#x7684;&#x6280;&#x672F;&#x535A;&#x5BA2;   //&#x535A;&#x5BA2;&#x540D;&#x5B57;</span><br><span class="line">subtitle: &#x79EF;&#x5C11;&#x6210;&#x591A;    //&#x5C0F;&#x6807;&#x9898;&#x53EF;&#x4EE5;&#x5199;&#x81EA;&#x5DF1;&#x559C;&#x6B22;&#x7684;&#x8BDD;</span><br><span class="line">description:          //&#x535A;&#x5BA2;&#x63CF;&#x8FF0;</span><br><span class="line">author: &#x5357;&#x5C71;&#x5FC6;     //&#x4F5C;&#x8005;&#x540D;&#x5B57;</span><br><span class="line">language: zh-Hans   //&#x8BED;&#x8A00;&#xFF08;&#x6B64;&#x5904;&#x4E3A;&#x7B80;&#x4F53;&#x4E2D;&#x6587;&#xFF09;</span><br><span class="line">url:  //&#x81EA;&#x5DF1;&#x8D2D;&#x4E70;&#x7684;&#x57DF;&#x540D;&#x7F51;&#x5740;&#xFF08;&#x6CA1;&#x6709;&#x53EF;&#x4E0D;&#x5199;&#xFF09;</span><br><span class="line">theme&#xFF1A;   //&#x4E3B;&#x9898;&#x7684;&#x540D;&#x5B57;</span><br><span class="line">deploy:</span><br><span class="line">type: git //&#x4F7F;&#x7528;git&#x53D1;&#x5E03;</span><br><span class="line">repo: https://github.com/nanshanyi/nanshanyi.github.io.git //&#x521A;&#x521A;&#x521B;&#x5EFA;&#x7684;github&#x4ED3;&#x5E93;&#x7684;&#x5730;&#x5740;</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x5B89;&#x88C5;&#x4E3B;&#x9898;"><a href="#&#x5B89;&#x88C5;&#x4E3B;&#x9898;" class="headerlink" title="&#x5B89;&#x88C5;&#x4E3B;&#x9898;"></a>&#x5B89;&#x88C5;&#x4E3B;&#x9898;</h4><p>&#x3000;&#x3000;&#x535A;&#x5BA2;&#x8981;&#x60F3;&#x70AB;&#x9177;&#x6F02;&#x4EAE;&#xFF0C;&#x4E00;&#x6B3E;&#x5408;&#x9002;&#x7684;&#x4E3B;&#x9898;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#xFF0C;hexo&#x672C;&#x8EAB;&#x5C31;&#x63D0;&#x4F9B;&#x4E86;50&#x79CD;<a href="https://hexo.io/themes/" target="_blank" rel="external">&#x4E3B;&#x9898;</a> &#x53EF;&#x4EE5;&#x9884;&#x89C8;&#x67E5;&#x770B;&#xFF0C;&#x9009;&#x62E9;&#x4E00;&#x6B3E;&#x81EA;&#x5DF1;&#x559C;&#x6B22;&#x7684;&#x4E3B;&#x9898;<br>&#x3000;&#x3000;&#x70B9;&#x51FB;&#x56FE;&#x7247;&#x5373;&#x53EF;&#x9884;&#x89C8;&#xFF0C;&#x770B;&#x5230;&#x6B64;&#x4E3B;&#x9898;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x70B9;&#x51FB;&#x84DD;&#x8272;&#x4E3B;&#x9898;&#x540D;&#x5373;&#x53EF;&#x8FDB;&#x5165;&#x6B64;&#x4E3B;&#x9898;&#x7684;github&#x4ED3;&#x5E93;&#xFF0C;&#x4E00;&#x822C;&#x4E3B;&#x9898;&#x4F5C;&#x8005;&#x90FD;&#x5199;&#x6709;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x3002;<br><img src="http://upload-images.jianshu.io/upload_images/966908-241175b53edf7af2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-09 &#x4E0B;&#x5348;6.00.09.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x5230;nanshanyi.github.io&#x6587;&#x4EF6;&#x4E0B;</span><br><span class="line">$ git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E00;&#x6B3E;&#x7B80;&#x7EA6;&#x6F02;&#x4EAE;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x4EBA;&#x633A;&#x591A;&#x7684;&#x3002;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5728;nanshanyi.github.io/themes&#x76EE;&#x5F55;&#x4E0B;&#x770B;&#x5230;nex&#xFF08;&#x4EE5;&#x4E0B;next&#x5747;&#x4E3A;&#x4E3B;&#x9898;&#x540D;&#xFF0C;&#x8DEF;&#x5F84;&#x4E2D;&#x4E3A;&#x4E3B;&#x9898;&#x6587;&#x4EF6;&#x5939;&#x540D;&#x3002;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x9898;&#x4E0D;&#x540C;&#x53EA;&#x8981;&#x628A;next&#x6362;&#x6210;&#x76F8;&#x5E94;&#x7684;&#x540D;&#x5B57;&#x5373;&#x53EF;&#xFF09;&#x4E3B;&#x9898;&#x3002;&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x6709;&#x4E09;&#x79CD;&#x5E03;&#x5C40;&#x5C55;&#x793A;&#x5F62;&#x5F0F;&#xFF0C;&#x53EF;&#x81EA;&#x884C;&#x6311;&#x9009;&#x4E3B;&#x9898;&#x7684;&#x8BE6;&#x7EC6;&#x914D;&#x7F6E;<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">&#x8BF7;&#x770B;&#x8FD9;&#x91CC;</a></p>
<h4 id="&#x521B;&#x5EFA;&#x535A;&#x5BA2;&#x6587;&#x7AE0;&#x4E0E;&#x53D1;&#x5E03;"><a href="#&#x521B;&#x5EFA;&#x535A;&#x5BA2;&#x6587;&#x7AE0;&#x4E0E;&#x53D1;&#x5E03;" class="headerlink" title="&#x521B;&#x5EFA;&#x535A;&#x5BA2;&#x6587;&#x7AE0;&#x4E0E;&#x53D1;&#x5E03;"></a>&#x521B;&#x5EFA;&#x535A;&#x5BA2;&#x6587;&#x7AE0;&#x4E0E;&#x53D1;&#x5E03;</h4><p>&#x3000;&#x3000;&#x5728;nanshanyi.github.io &#x76EE;&#x5F55;&#x4E0B;&#x7EC8;&#x7AEF;&#x547D;&#x4EE4;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new &apos;&#x6587;&#x4EF6;&#x540D;&apos; //&#x4F1A;&#x5728;source/_posts&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x540D;.md&#x6587;&#x4EF6;</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x8FD9;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;markdown&#x7F16;&#x8F91;&#x5668;&#x5F00;&#x59CB;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x4E86;&#xFF08;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x6709;&#x5DE5;&#x5177;&#xFF09;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: new//&#x535A;&#x5BA2;&#x6807;&#x9898;</span><br><span class="line">date: 2016-05-10 10:47:49 //&#x521B;&#x5EFA;&#x65F6;&#x95F4;</span><br><span class="line">tags:  //&#x5206;&#x7C7B;&#x6807;&#x7B7E;</span><br><span class="line">---</span><br><span class="line">&#x3000;&#x3000;&#x8FD9;&#x91CC;&#x5199;&#x6B63;&#x6587;&#xFF08;&#x4E0A;&#x9762;&#x7684;---&#x662F;&#x5FC5;&#x8981;&#x7684;&#xFF09;</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x672C;&#x5730;&#x67E5;&#x770B;&#x6548;&#x679C;&#x9884;&#x89C8;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;<a href="https://localhost:4000" target="_blank" rel="external">https://localhost:4000</a> &#x5373;&#x53EF;&#x67E5;&#x770B;&#x6548;&#x679C;<br>&#x3000;&#x3000;&#x53D1;&#x5E03;&#x5230; github&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d //&#x53D1;&#x5E03;&#x5230; github</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x53D1;&#x5E03;&#x5230; github &#x540E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="http://nanshanyi.github.io">http://nanshanyi.github.io</a> &#x8BBF;&#x95EE;&#xFF08;&#x8BF7;&#x4F7F;&#x7528;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x5740;&#xFF09;</p>
<h4 id="&#x535A;&#x5BA2;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;-&#x97F3;&#x4E50;"><a href="#&#x535A;&#x5BA2;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;-&#x97F3;&#x4E50;" class="headerlink" title="&#x535A;&#x5BA2;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;,&#x97F3;&#x4E50;"></a>&#x535A;&#x5BA2;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;,&#x97F3;&#x4E50;</h4><p>&#x3000;&#x3000;&#x57FA;&#x672C;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x529E;&#x6CD5;<br>&#xFF08;1&#xFF09;&#x653E;&#x5728;&#x672C;&#x5730;&#x6587;&#x4EF6;<br>&#x9996;&#x5148;&#x5728;nanshanyi.github.io&#x76EE;&#x5F55;&#x4E0B;&#x786E;&#x8BA4;_config.yml &#x4E2D;&#x6709; post_asset_folder:true &#x3002;<br> &#x5728; hexo &#x76EE;&#x5F55;&#xFF0C;&#x6267;&#x884C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<p>&#x3000;&#x3000;&#x4E4B;&#x540E;&#x518D;&#x4F7F;&#x7528; hexo new &#x2018;new&#x2019;&#x521B;&#x5EFA;&#x65B0;&#x535A;&#x5BA2;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5728;source/_posts&#x91CC;&#x9762;&#x521B;&#x5EFA;.md&#x6587;&#x4EF6;&#x7684;&#x540C;&#x65F6;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x540D;&#x5B57;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x3002;<br>&#x628A;&#x8BE5;&#x6587;&#x7AE0;&#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x56FE;&#x7247;&#x653E;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x5373;&#x53EF;&#x3002;<br>&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![&#x201C;&#x56FE;&#x7247;&#x63CF;&#x8FF0;&#x201D;&#xFF08;&#x53EF;&#x4EE5;&#x4E0D;&#x5199;&#xFF09;](/&#x6587;&#x4EF6;&#x5939;&#x540D;/&#x4F60;&#x7684;&#x56FE;&#x7247;&#x540D;&#x5B57;.JPG)</span><br><span class="line">&#x4F8B;&#x5982;&#xFF1A;</span><br><span class="line">&#xFF01;[ ] (new/text.jpg)</span><br></pre></td></tr></table></figure></p>
<p>  &#xFF08;2&#xFF09;&#x653E;&#x5728;<a href="https://portal.qiniu.com/signup?code=3lglas6pgi2qa" target="_blank" rel="external">&#x4E03;&#x725B;</a>&#x4E0A;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x6CE8;&#x518C;&#xFF0C;&#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x751F;&#x6210;&#x94FE;&#x63A5;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x6587;&#x7AE0;&#x4E2D;&#x4F7F;&#x7528;&#x94FE;&#x63A5;&#x5373;&#x53EF;&#x3002;<br>  &#xFF08;3&#xFF09;&#x63D2;&#x5165;&#x97F3;&#x4E50;<br>&#x3000;&#x3000;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7F51;&#x6613;&#x4E91;&#x97F3;&#x4E50;&#xFF0C;&#x641C;&#x7D22;&#x60F3;&#x8981;&#x7684;&#x6B4C;&#x66F2;&#xFF0C;&#x70B9;&#x51FB;&#x6B4C;&#x66F2;&#x540D;&#x5B57;&#x8FDB;&#x5165;&#x64AD;&#x653E;&#x5668;&#x9875;&#x9762;&#xFF0C;&#x70B9;&#x51FB;&#x751F;&#x6210;&#x5916;&#x94FE;&#x64AD;&#x653E;&#x5668;&#xFF1B;&#x590D;&#x5236;&#x4EE3;&#x7801;&#xFF0C;&#x76F4;&#x63A5;&#x7C98;&#x8D34;&#x5230;&#x535A;&#x6587;&#x4E2D;&#x5373;&#x53EF;&#x3002;&#x8FD9;&#x6837;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x7F51;&#x6613;&#x7684;&#x64AD;&#x653E;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=298 height=52 src=&quot;http://music.163.com/outchain/player?type=2&amp;id=32192436&amp;auto=1&amp;height=32&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">//&#x5176;&#x4E2D;&#x7684;width=298 height=52 &#x5747;&#x6539;&#x4E3A;0&#x5C31;&#x770B;&#x4E0D;&#x5230;&#x4E86;&#xFF0C;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x64AD;&#x653E;&#x97F3;&#x4E50;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/966908-656c1aff502007d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;2.01.52.png"><br><img src="http://upload-images.jianshu.io/upload_images/966908-ec51c5639bc1a023.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;1.56.58.png"></p>
<h3 id="&#x96C6;&#x6210;&#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#xFF0C;&#x5206;&#x4EAB;"><a href="#&#x96C6;&#x6210;&#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#xFF0C;&#x5206;&#x4EAB;" class="headerlink" title="&#x96C6;&#x6210;&#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#xFF0C;&#x5206;&#x4EAB;"></a>&#x96C6;&#x6210;&#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#xFF0C;&#x5206;&#x4EAB;</h3><p>&#x3000;&#x3000;&#x7533;&#x8BF7;<a href="http://duoshuo.com/" target="_blank" rel="external">&#x591A;&#x8BF4;</a>&#x5E10;&#x53F7;,&#x6253;&#x5F00;&#x9875;&#x9762;&#x70B9;&#x51FB;&#x6211;&#x8981;&#x5B89;&#x88C5;&#x6CE8;&#x518C;&#x5E10;&#x53F7;<br><img src="http://upload-images.jianshu.io/upload_images/966908-ed14c379d74f2b7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0A;&#x5348;10.38.15.png"></p>
<p>&#x3000;&#x3000;&#x5728;themes/next&#x76EE;&#x5F55;&#x4E0B;&#x6253;&#x5F00; _config.yml&#xFF0C;&#x8BBE;&#x7F6E;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">duoshuo_shortname:  nanshanyi //&#x4E0A;&#x9762;&#x591A;&#x8BF4;&#x57DF;&#x540D;&#x4E2D;&#x586B;&#x7684;&#x5185;&#x5BB9;</span><br><span class="line">&#x9700;&#x8981;&#x5206;&#x4EAB;&#x7684;&#x6253;&#x5F00;duoshuo_share: true &#x5373;&#x53EF;&#xFF0C;&#x652F;&#x6301;&#x5206;&#x4EAB;&#x5230;&#x5FAE;&#x535A;&#x3001;QQ&#x7A7A;&#x95F4;&#x3001;&#x5FAE;&#x4FE1;</span><br></pre></td></tr></table></figure></p>
<p>&#x7136;&#x540E;&#x6253;&#x5F00;themes\landscape\layout_partial\article.ejs&#x6587;&#x4EF6;<br>&#x628A;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname){ %&gt;</span><br><span class="line">&lt;section id=&quot;comments&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;disqus_thread&quot;&gt;</span><br><span class="line">    &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;//disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/section&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></table></figure></p>
<p>&#x66FF;&#x6362;&#x4E3A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.comments &amp;&amp; config.duoshuo_shortname){ %&gt;</span><br><span class="line">  &lt;section id=&quot;comments&quot;&gt;</span><br><span class="line">    &lt;!-- &#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#x6846; start --&gt;</span><br><span class="line">    &lt;div class=&quot;ds-thread&quot; data-thread-key=&quot;&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;&quot; data-title=&quot;&lt;%= post.title %&gt;&quot; data-url=&quot;&lt;%= page.permalink %&gt;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- &#x591A;&#x8BF4;&#x8BC4;&#x8BBA;&#x6846; end --&gt;</span><br><span class="line">    &lt;!-- &#x591A;&#x8BF4;&#x516C;&#x5171;JS&#x4EE3;&#x7801; start (&#x4E00;&#x4E2A;&#x7F51;&#x9875;&#x53EA;&#x9700;&#x63D2;&#x5165;&#x4E00;&#x6B21;) --&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var duoshuoQuery = {short_name:&apos;&lt;%= config.duoshuo_shortname %&gt;&apos;};</span><br><span class="line">      (function() {</span><br><span class="line">        var ds = document.createElement(&apos;script&apos;);</span><br><span class="line">        ds.type = &apos;text/javascript&apos;;ds.async = true;</span><br><span class="line">        ds.src = (document.location.protocol == &apos;https:&apos; ? &apos;https:&apos; : &apos;http:&apos;) + &apos;//static.duoshuo.com/embed.js&apos;;</span><br><span class="line">        ds.charset = &apos;UTF-8&apos;;</span><br><span class="line">        (document.getElementsByTagName(&apos;head&apos;)[0]</span><br><span class="line">         || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(ds);</span><br><span class="line">      })();</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line">    &lt;!-- &#x591A;&#x8BF4;&#x516C;&#x5171;JS&#x4EE3;&#x7801; end --&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">  &lt;% } %&gt;</span><br></pre></td></tr></table></figure></p>
<p>&#x7136;&#x540E;&#x4F60;hexo s ,&#x6253;&#x5F00;<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a> &#x6253;&#x5F00;&#x6587;&#x7AE0;&#x770B;&#x4E00;&#x4E0B;&#xFF0C;&#x8BC4;&#x8BBA;&#x548C;&#x5206;&#x4EAB;&#x5DF2;&#x7ECF;&#x9759;&#x9759;&#x7684;&#x8EBA;&#x5728;&#x90A3;&#x4E86;<br><img src="http://upload-images.jianshu.io/upload_images/966908-8a2b28fd906fae93.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;3.36.43.png"></p>
<h3 id="&#x6DFB;&#x52A0;&#x6807;&#x7B7E;&#x9875;"><a href="#&#x6DFB;&#x52A0;&#x6807;&#x7B7E;&#x9875;" class="headerlink" title="&#x6DFB;&#x52A0;&#x6807;&#x7B7E;&#x9875;"></a>&#x6DFB;&#x52A0;&#x6807;&#x7B7E;&#x9875;</h3><p>&#x3000;&#x3000;&#x5728;nanshanyi.github.io&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page tags //&#x4F1A;&#x5728;nanshanyi.github.io/source&#x4E0B;&#x521B;&#x5EFA;tags&#x6587;&#x4EF6;&#x5939;&#x5185;&#x90E8;&#x662F;&#x4E00;&#x4E2A;index.md&#x548C;index&#x6587;&#x4EF6;&#x5939;</span><br></pre></td></tr></table></figure></p>
<p>&#x4FEE;&#x6539;nanshanyi.github.io/themes/next/_config.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: /      //&#x4E3B;&#x9875;</span><br><span class="line">  #categories: /categories //&#x5206;&#x7C7B;</span><br><span class="line">  archives: /archives   //&#x5F52;&#x6863;</span><br><span class="line">  tags: /tags   //&#x6807;&#x7B7E;&#xFF08;&#x6DFB;&#x52A0;&#x6B64;&#x884C;&#x5373;&#x53EF;&#xFF09;</span><br><span class="line">  about: /about   //&#x5173;&#x4E8E;</span><br><span class="line">  #commonweal: /404.html</span><br></pre></td></tr></table></figure></p>
<p>&#x9996;&#x9875;&#x83DC;&#x5355;&#x5C31;&#x4F1A;&#x6709;&#x4FBF;&#x7B7E;&#x9879;&#xFF0C;&#x70B9;&#x51FB;&#x5373;&#x53EF;&#x8FDB;&#x5165;&#x6807;&#x7B7E;&#x9875;&#x3002;</p>
<h3 id="&#x6DFB;&#x52A0;&#x641C;&#x7D22;&#x529F;&#x80FD;"><a href="#&#x6DFB;&#x52A0;&#x641C;&#x7D22;&#x529F;&#x80FD;" class="headerlink" title="&#x6DFB;&#x52A0;&#x641C;&#x7D22;&#x529F;&#x80FD;"></a>&#x6DFB;&#x52A0;&#x641C;&#x7D22;&#x529F;&#x80FD;</h3><p>&#x3000;&#x3000;next&#x652F;&#x6301;Swiftype &#x3001;&#x5FAE;&#x641C;&#x7D22;&#x548C;Local Search<br>&#x3000;&#x3000;&#xFF08;1&#xFF09;Swiftype &#xFF08;&#x6536;&#x8D39;&#x7684;&#x6CA1;&#x6709;&#x514D;&#x8D39;&#x7248;&#xFF0C;&#x8FDB;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;15&#x5929;&#xFF09;&#x662F;&#x4E3A;&#x7F51;&#x7AD9;&#x548C;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x5185;&#x90E8;&#x641C;&#x7D22;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x70B9;&#x51FB;&#x8FDB;&#x5165;<a href="https://swiftype.com/users/sign_up" target="_blank" rel="external">Swiftype&#x6CE8;&#x518C;&#x9875;&#x9762;</a> &#xFF0C;&#x6CE8;&#x518C;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x586B;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x7684;&#x7F51;&#x5740;<br>&#x7136;&#x540E;&#x9009;&#x62E9;<br><img src="http://upload-images.jianshu.io/upload_images/966908-7aed60a7543e2571.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;9.07.45.png"><br>&#x9009;&#x62E9; install Search<br><img src="http://upload-images.jianshu.io/upload_images/966908-8cfb4600366ab1c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;9.10.01.png"><br>&#x9014;&#x4E2D;&#x7684;&#x5373;&#x4E3A;swiftype_key<br>&#x4FEE;&#x6539;nanshanyi.github.io/themes/next/_config.yml&#x4E2D;&#x7684;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swiftype_key:&#x4E0A;&#x9762;&#x7EA2;&#x5708;&#x4E2D;&#x7684;&#x5185;&#x5BB9;</span><br></pre></td></tr></table></figure></p>
<p>&#x70B9;&#x51FB; resume Configuration &#x9009;&#x62E9; search field edit<br><img src="http://upload-images.jianshu.io/upload_images/966908-6673e77e95e084da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;9.49.27.png"><br>save<br>&#x53D1;&#x5E03;&#x5373;&#x53EF;&#x770B;&#x5230;&#x6548;&#x679C;<br><img src="http://upload-images.jianshu.io/upload_images/966908-fd0c0885439ef44d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-05-10 &#x4E0B;&#x5348;9.54.34.png"><br>    &#xFF08;2&#xFF09;&#x6DFB;&#x52A0;&#x672C;&#x5730;&#x641C;&#x7D22;<br>&#x5B89;&#x88C5; hexo-generator-search&#xFF0C;&#x5728;nanshanyi.github.io&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;nanshanyi.github.io/themes/next/_config.yml&#x6DFB;&#x52A0;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">      path: search.xml</span><br><span class="line">      field: post</span><br></pre></td></tr></table></figure></p>
<p>  &#x53D1;&#x5E03;&#x5373;&#x53EF;&#x770B;&#x5230;&#x6548;&#x679C;&#xFF0C;&#x548C;&#x4E0A;&#x9762;&#x7684; swiftType &#x6548;&#x679C;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x5C31;&#x4E0D;&#x518D;&#x7C98;&#x56FE;&#x7247;&#x4E86;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOS JavaScriptCore实现OC与JS的交互]]></title>
      <url>http://nanshanyi.github.io/2016/05/22/jstooc/</url>
      <content type="html"><![CDATA[<p>  JS &#x4E0E; OC &#x7684;&#x4EA4;&#x4E92;&#x539F;&#x6765;&#x6CA1;&#x6709;&#x597D;&#x597D;&#x7814;&#x7A76;&#x8FC7;&#xFF0C;&#x7528;&#x7684;&#x90FD;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x62E6;&#x622A; Url &#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;&#x5B9A;&#x4E49;&#x4E13;&#x7528;&#x7684; Url &#x6765;&#x62E6;&#x622A;&#x5173;&#x952E;&#x5B57;&#x6765;&#x8FDB;&#x884C;&#x7279;&#x5B9A;&#x5904;&#x7406;&#x3002;&#x4F46;&#x8FD9;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x4F20;&#x503C;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x4EA4;&#x4E92;&#x3002;&#x6D89;&#x53CA;&#x5230;&#xFF0C;JS &#x8C03;&#x7528; OC &#x65B9;&#x6CD5;&#x6216;&#x8005; OC &#x8C03;&#x7528; JS &#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x4EA4;&#x4E92;&#x903B;&#x8F91;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5C31;&#x663E;&#x5F97;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;&#x4E86;&#x3002;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x6709;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x5982;&#xFF1A;WebViewJavascriptBridge&#x3002;&#x4F46;&#x4E00;&#x822C;&#x7CFB;&#x7EDF;&#x7684;&#x65B9;&#x6CD5;&#x8DB3;&#x591F;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x6CA1;&#x5FC5;&#x8981;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x3002;&#x8FD9;&#x6837;&#x5373;&#x6709;&#x5229;&#x4E8E;&#x51CF;&#x5C0F;&#x5B89;&#x88C5;&#x5305;&#x4F53;&#x79EF;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x4E0D;&#x7A33;&#x5B9A;&#x6027;&#x7B49;&#x56E0;&#x7D20;&#x7684;&#x5E72;&#x6270;</p>
<h3 id="&#x62E6;&#x622A;url&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x4EA4;&#x4E92;"><a href="#&#x62E6;&#x622A;url&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x4EA4;&#x4E92;" class="headerlink" title="&#x62E6;&#x622A;url&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x4EA4;&#x4E92;"></a>&#x62E6;&#x622A;url&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x4EA4;&#x4E92;</h3><p>&#x3000;&#x3000;&#x5728;webView&#x7684;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#x4E2D;&#x5904;&#x7406;<br>&#x3000;&#x3000;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B; URL &#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSString *scheme = url.scheme;//&#x534F;&#x8BAE;&#xFF1A;http</span><br><span class="line">NSString *host = url.host;//&#x4E3B;&#x673A;&#x540D;</span><br><span class="line">NSNumber *port = url.port;//&#x7AEF;&#x53E3;&#x53F7;</span><br><span class="line">NSString *path = url.path;//&#x4E00;&#x822C;&#x7528;&#x6765;&#x8868;&#x793A;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x6216;&#x6587;&#x4EF6;&#x5730;&#x5740;</span><br><span class="line">NSString *query = url.query;//&#x53C2;&#x6570;&#xFF0C;&#x53D1;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x7684;&#x53C2;&#x6570;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{</span><br><span class="line">    NSURL *url = request.URL;</span><br><span class="line">    if ([url.scheme isEqualToString:@&quot;nanshanyi&quot;]) {</span><br><span class="line">        //&#x5728;&#x8FD9;&#x91CC;&#x505A;JavaScript&#x8C03;&#x7528;Objective-C&#x7684;&#x4E8B;&#x3002;</span><br><span class="line">        //&#x9700;&#x8981;&#x4F20;&#x7684;&#x503C;&#x653E;&#x5728;url&#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x91CC;&#x5982;&#xFF1A;Nanshanyi://www.php8080.com?{&quot;title&quot;:&quot;&#x6807;&#x9898;&quot;,&quot;id&quot;:&quot;123&quot;,&quot;des&quot;:&quot;&#x63CF;&#x8FF0;&#x5185;&#x5BB9;&quot;}</span><br><span class="line">        NSString *dataJson = url.query;//&#x62FF;&#x5230;&#x540E;&#x9762;&#x7684;json&#x5B57;&#x7B26;&#x4E32;</span><br><span class="line">       NSString *str = [dataJson stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line">        NSLog(@&quot;%@&quot;,str);</span><br><span class="line">//&#x6267;&#x884C;&#x4E00;&#x6BB5;js&#x4EE3;&#x7801;&#xFF0C;&#x5F39;&#x51FA;&#x63D0;&#x793A;&#x6846;</span><br><span class="line">        [webView stringByEvaluatingJavaScriptFromString:@&quot;alert(&apos;seccess&apos;)&quot;];</span><br><span class="line">        return NO;</span><br><span class="line">    }</span><br><span class="line">    return YES;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="&#x4F7F;&#x7528;JavaScriptCore&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;"><a href="#&#x4F7F;&#x7528;JavaScriptCore&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;" class="headerlink" title="&#x4F7F;&#x7528;JavaScriptCore&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;"></a>&#x4F7F;&#x7528;JavaScriptCore&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;</h3><p>&#x3000;&#x3000;JavaScriptCore&#x662F;&#x5C01;&#x88C5;&#x4E86;JavaScript&#x548C;Objective-C&#x6865;&#x63A5;&#x7684;Objective-C API&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x8F83;&#x5C11;&#x7684;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;JavaScript&#x4E0E;Objective-C&#x7684;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#x3002;<br>&#x3000;&#x3000;&#x5728;iOS7&#x4E4B;&#x524D;&#xFF0C;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x5411;UIWebView&#x53D1;&#x9001;stringByEvaluatingJavaScriptFromString:&#x6D88;&#x606F;&#x6765;&#x6267;&#x884C;&#x4E00;&#x6BB5;JavaScript&#x7684;&#x811A;&#x672C;&#x3002;&#x800C;&#x4E14;&#x5982;&#x679C;&#x60F3;&#x7528;JavaScript&#x6765;&#x8C03;&#x7528;Objective-C&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5FC5;&#x987B;&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;URL&#xFF08;&#x4F8B;&#x5982;&#xFF1A;Nanshanyi://&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5728;UIWebView&#x7684;delegate&#x65B9;&#x6CD5;webView:shouldStartLoadWithRequest:navigationType&#x4E2D;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x95EE;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x65B9;&#x6CD5;<br>JavaScriptCore&#x4E2D;&#x7C7B;&#x53CA;&#x534F;&#x8BAE;&#xFF1A;<br>&#x3000;&#x3000;JSContext&#xFF1A;&#x7ED9;JavaScript&#x63D0;&#x4F9B;&#x8FD0;&#x884C;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x73AF;&#x5883;<br>&#x3000;&#x3000;JSValue&#xFF1A;JavaScript&#x548C;Objective-C&#x6570;&#x636E;&#x548C;&#x65B9;&#x6CD5;&#x7684;&#x6865;&#x6881;<br>&#x3000;&#x3000; JSManagedValue&#xFF1A;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x548C;&#x65B9;&#x6CD5;&#x7684;&#x7C7B;<br>&#x3000;&#x3000;JSVirtualMachine&#xFF1A;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x76F8;&#x5173;&#xFF0C;&#x4F7F;&#x7528;&#x8F83;&#x5C11;<br>&#x3000;&#x3000;JSExport&#xFF1A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#xFF0C;&#x5982;&#x679C;&#x91C7;&#x7528;&#x534F;&#x8BAE;&#x7684;&#x65B9;&#x6CD5;&#x4EA4;&#x4E92;&#xFF0C;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x534F;&#x8BAE;&#x5FC5;&#x987B;&#x9075;&#x5B88;&#x6B64;&#x534F;&#x8BAE;</p>
<h4 id="&#x4F7F;&#x7528;Delegate&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><a href="#&#x4F7F;&#x7528;Delegate&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4F7F;&#x7528;Delegate&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"></a>&#x4F7F;&#x7528;Delegate&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</h4><p>&#x5148;&#x653E;&#x4E0A;js&#x7684;&#x7F51;&#x9875;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x5EFA;&#x4E00;&#x4E2A;HTML&#x6587;&#x4EF6;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#x4F7F;&#x7528;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;OC&#x548C;JS&#x7684;&#x4EA4;&#x4E92;&#x4EE3;&#x7406;&#x65B9;&#x5F0F;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;!-- &#x751F;&#x6210;&#x4E00;&#x4E2A; button &#x6DFB;&#x52A0;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;--&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;JsToOcShare&quot; onclick=&quot;callShare()&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function callShare() {</span><br><span class="line">        var shareContent = JSON.stringify({&quot;title&quot;: &quot;&#x5206;&#x4EAB;&quot;, &quot;desc&quot;: &quot;&#x5206;&#x4EAB;&#x5185;&#x5BB9;&quot;, &quot;shareUrl&quot;: &quot;http://www.jianshu.com/users/774b1d5616a7/latest_articles&quot;});</span><br><span class="line">        Nanshanyi.share(shareContent);</span><br><span class="line">    }</span><br><span class="line">    &lt;!--    OC&#x8C03;JS--&gt;</span><br><span class="line">    function showAlert(message){</span><br><span class="line">        alert(message);</span><br><span class="line">    }</span><br><span class="line">    &lt;!--    JS&#x8C03;OC&#x6210;&#x529F;&#x540E;&#x56DE;&#x8C03;--&gt;</span><br><span class="line">    var shareCallback = function(){</span><br><span class="line">        alert(&apos;success&apos;);</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;JavaScriptCore/JavaScriptCore.h&gt;</span><br><span class="line">@protocol JSObjcDelegate &lt;JSExport&gt;</span><br><span class="line"></span><br><span class="line">- (void)share:(NSString *)shareContent;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line">@interface ViewController : UIViewController&lt;JSObjcDelegate&gt;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>.m&#x6587;&#x4EF6;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line">@interface ViewController ()&lt;UIWebViewDelegate&gt;</span><br><span class="line">@property (nonatomic,strong)UIWebView *webView;</span><br><span class="line">@property (nonatomic,strong)JSContext *jsContext;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad {</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    [self CustomUI];</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">- (void)CustomUI{</span><br><span class="line">    self.webView = [[UIWebView alloc]initWithFrame:self.view.bounds];</span><br><span class="line">    self.webView.delegate = self;</span><br><span class="line">    [self.view addSubview:_webView];</span><br><span class="line"></span><br><span class="line">    NSURL *url = [[NSBundle mainBundle] URLForResource:@&quot;untitled3&quot; withExtension:@&quot;html&quot;];</span><br><span class="line">    [self.webView loadRequest:[NSURLRequest requestWithURL:url]];</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView{</span><br><span class="line">    _jsContext = [webView valueForKeyPath:@&quot;documentView.webView.mainFrame.javaScriptContext&quot;];</span><br><span class="line">    //&#x4EE3;&#x7406;&#x65B9;&#x5F0F;JS&#x8C03;OC&#x65B9;&#x6CD5;</span><br><span class="line">    //Nanshanyi &#x76F8;&#x5F53;&#x4E8E;&#x6865;&#x63A5;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x5C06; OC &#x4E0E; JS &#x8054;&#x7CFB;&#x8D77;&#x6765;</span><br><span class="line">    _jsContext[@&quot;Nanshanyi&quot;] = self;</span><br><span class="line">    _jsContext.exceptionHandler = ^(JSContext *context, JSValue *exceptionValue) {</span><br><span class="line">        context.exception = exceptionValue;</span><br><span class="line">        NSLog(@&quot;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#xFF1A;%@&quot;, exceptionValue);</span><br><span class="line">    };</span><br><span class="line">}</span><br><span class="line">- (void)share:(NSString *)shareContent {</span><br><span class="line">    NSLog(@&quot;share:%@&quot;, shareContent);</span><br><span class="line">    // &#x5206;&#x4EAB;&#x6210;&#x529F;&#x540E;,&#x56DE;&#x8C03;js&#x7684;&#x65B9;&#x6CD5;shareCallback</span><br><span class="line">//    &#x4E5F;&#x5373;&#x662F; OC &#x8C03;&#x7528; JS &#x65B9;&#x6CD5;,&#x53EA;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x4F20;&#x9012;</span><br><span class="line">    JSValue *shareCallback = self.jsContext[@&quot;shareCallback&quot;];</span><br><span class="line">    [shareCallback callWithArguments:nil];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x4F7F;&#x7528;Block&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><a href="#&#x4F7F;&#x7528;Block&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4F7F;&#x7528;Block&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"></a>&#x4F7F;&#x7528;Block&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</h4><p>&#x540C;&#x6837;&#x653E;&#x4E0A;&#x4E00;&#x6BB5;&#x7B80;&#x5355;&#x7684;JS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;OC&#x548C;JS&#x7684;&#x4EA4;&#x4E92;Block&#x65B9;&#x5F0F;&lt;/h1&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;JsToOcShare&quot; onclick=&quot;callShare(shareContent)&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var shareContent = JSON.stringify({&quot;title&quot;:&quot;&#x5206;&#x4EAB;&quot;, &quot;desc&quot;:&quot;&#x5206;&#x4EAB;&#x5185;&#x5BB9;&quot;, &quot;shareUrl&quot;:&quot;http://www.jianshu.com/users/774b1d5616a7/latest_articles&quot;});</span><br><span class="line"></span><br><span class="line">    function callShare(share) {</span><br><span class="line">    //share&#x4E3A;&#x5F62;&#x53C2;&#xFF0C;shareContent&#x4E3A;&#x5B9E;&#x53C2;&#xFF0C;&#x5373;&#x8981;&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;</span><br><span class="line">    }</span><br><span class="line">    //  OC&#x8C03;JS message&#x4E3A;&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;</span><br><span class="line">    function showAlert(message){</span><br><span class="line">        alert(message);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>WebView&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (void)showAlert{//&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;OC&#x8C03;&#x7528;JS&#xFF0C;&#x5E76;&#x4F20;&#x53C2;</span><br><span class="line">    NSString *jsStr = @&quot;showAlert(&apos;ios js&#x4EA4;&#x4E92;&#x6210;&#x529F;,&#x6211;&#x662F;&#x7F51;&#x9875; alert&apos;)&quot;;</span><br><span class="line">    [_jsContext evaluateScript:jsStr];</span><br><span class="line">}</span><br><span class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView{</span><br><span class="line">    _jsContext = [webView valueForKeyPath:@&quot;documentView.webView.mainFrame.javaScriptContext&quot;];</span><br><span class="line">    //block &#x65B9;&#x5F0F; JS&#x76F4;&#x63A5;&#x8C03;&#x7528;OC&#xFF0C;&#x5E76;&#x4F20;&#x53C2;&#xFF0C;&#x7B80;&#x5355;&#x660E;&#x4E86;</span><br><span class="line">    __weak typeof  (self)weakSelf = self;</span><br><span class="line">        _jsContext[@&quot;callShare&quot;] =^(id obj){</span><br><span class="line">            weakSelf.lable.text = obj;</span><br><span class="line">    //&#x628A;&#x4F20;&#x8FC7;&#x6765;&#x7684;Json&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8F6C;&#x4E3A;&#x5B57;&#x5178;</span><br><span class="line">            NSData *data = [(NSString *)obj dataUsingEncoding:NSUTF8StringEncoding ];</span><br><span class="line">            NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];</span><br><span class="line">            NSLog(@&quot;%@&quot;,dict);</span><br><span class="line"></span><br><span class="line">        };</span><br><span class="line">    _jsContext.exceptionHandler = ^(JSContext *context, JSValue *exceptionValue) {</span><br><span class="line">        context.exception = exceptionValue;</span><br><span class="line">  //&#x6BD4;&#x5982;&#x628A;js&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x6539;&#x6389;&#xFF0C;OC&#x627E;&#x4E0D;&#x5230;&#x76F8;&#x5E94;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4F1A;&#x6253;&#x5370;&#x5F02;&#x5E38;&#x4FE1;&#x606F;</span><br><span class="line">        NSLog(@&quot;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#xFF1A;%@&quot;, exceptionValue);</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x81F3;&#x6B64;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;JS&#x4E0E;OC&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;JS&#x4E0E;OC&#x65B9;&#x6CD5;&#x7684;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#xFF0C;&#x4E0E;&#x4F20;&#x503C;&#x3002;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x5BF9;&#x7684;&#x8BF7;&#x6279;&#x8BC4;&#x6307;&#x6B63;&#xFF0C;&#x4E92;&#x76F8;&#x5B66;&#x4E60;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOS原生方法实现二维码生成与扫描]]></title>
      <url>http://nanshanyi.github.io/2016/05/10/qrcode/</url>
      <content type="html"><![CDATA[<p>&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;&#x6709;&#x597D;&#x591A;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF0C;&#x5982;Z-Xing&#x3002;&#x4F46;&#x662F;&#x4E3A;&#x4E86;&#x63A7;&#x5236;&#x5B89;&#x88C5;&#x5305;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x6216;&#x8005;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#x6EE1;&#x8DB3;.</p>
<h3 id="&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;"><a href="#&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;" class="headerlink" title="&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;"></a>&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage *)createNonInterpolatedUIImageFormCIImage:(CIImage *)image withSize:(CGFloat) size waterImageSize:(CGFloat)waterImagesize{</span><br><span class="line">    CGRect extent = CGRectIntegral(image.extent);</span><br><span class="line">    CGFloat scale = MIN(size/CGRectGetWidth(extent), size/CGRectGetHeight(extent));</span><br><span class="line"></span><br><span class="line">    // 1.&#x521B;&#x5EFA;bitmap;</span><br><span class="line">    size_t width = CGRectGetWidth(extent) * scale;</span><br><span class="line">    size_t height = CGRectGetHeight(extent) * scale;</span><br><span class="line">    //&#x521B;&#x5EFA;&#x4E00;&#x4E2A;DeviceGray&#x989C;&#x8272;&#x7A7A;&#x95F4;</span><br><span class="line">    CGColorSpaceRef cs = CGColorSpaceCreateDeviceGray();</span><br><span class="line">    //CGBitmapContextCreate(void * _Nullable data, size_t width, size_t height, size_t bitsPerComponent, size_t bytesPerRow, CGColorSpaceRef  _Nullable space, uint32_t bitmapInfo)</span><br><span class="line">    //width&#xFF1A;&#x56FE;&#x7247;&#x5BBD;&#x5EA6;&#x50CF;&#x7D20;</span><br><span class="line">    //height&#xFF1A;&#x56FE;&#x7247;&#x9AD8;&#x5EA6;&#x50CF;&#x7D20;</span><br><span class="line">    //bitsPerComponent&#xFF1A;&#x6BCF;&#x4E2A;&#x989C;&#x8272;&#x7684;&#x6BD4;&#x7279;&#x503C;&#xFF0C;&#x4F8B;&#x5982;&#x5728;rgba-32&#x6A21;&#x5F0F;&#x4E0B;&#x4E3A;8</span><br><span class="line">    //bitmapInfo&#xFF1A;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x56FE;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x4E00;&#x4E2A;alpha&#x901A;&#x9053;&#x3002;</span><br><span class="line">    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, cs, (CGBitmapInfo)kCGImageAlphaNone);</span><br><span class="line">    CIContext *context = [CIContext contextWithOptions:nil];</span><br><span class="line">    //&#x521B;&#x5EFA;CoreGraphics image</span><br><span class="line">    CGImageRef bitmapImage = [context createCGImage:image fromRect:extent];</span><br><span class="line"></span><br><span class="line">    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);</span><br><span class="line">    CGContextScaleCTM(bitmapRef, scale, scale);</span><br><span class="line">    CGContextDrawImage(bitmapRef, extent, bitmapImage);</span><br><span class="line"></span><br><span class="line">    // 2.&#x4FDD;&#x5B58;bitmap&#x5230;&#x56FE;&#x7247;</span><br><span class="line">    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);</span><br><span class="line">    CGContextRelease(bitmapRef); CGImageRelease(bitmapImage);</span><br><span class="line"></span><br><span class="line">    //&#x539F;&#x56FE;</span><br><span class="line">    UIImage *outputImage = [UIImage imageWithCGImage:scaledImage];</span><br><span class="line">    //&#x7ED9;&#x4E8C;&#x7EF4;&#x7801;&#x52A0; logo &#x56FE;</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(outputImage.size, NO, [[UIScreen mainScreen] scale]);</span><br><span class="line">    [outputImage drawInRect:CGRectMake(0,0 , size, size)];</span><br><span class="line">    //logo&#x56FE;</span><br><span class="line">    UIImage *waterimage = [UIImage imageNamed:@&quot;icon_imgApp&quot;];</span><br><span class="line">    //&#x628A;logo&#x56FE;&#x753B;&#x5230;&#x751F;&#x6210;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#x4E0A;&#xFF0C;&#x6CE8;&#x610F;&#x5C3A;&#x5BF8;&#x4E0D;&#x8981;&#x592A;&#x5927;&#xFF08;&#x6700;&#x5927;&#x4E0D;&#x8D85;&#x8FC7;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#x7684;%30&#xFF09;&#xFF0C;&#x592A;&#x5927;&#x4F1A;&#x9020;&#x6210;&#x626B;&#x4E0D;&#x51FA;&#x6765;</span><br><span class="line">    [waterimage drawInRect:CGRectMake((size-waterImagesize)/2.0, (size-waterImagesize)/2.0, waterImagesize, waterImagesize)];</span><br><span class="line">    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    return newPic;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="&#x8FD9;&#x4E2A;&#x662F;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;inputMessage&#x548C;inputCorrectionLevel&#x7684;&#x89E3;&#x91CA;"><a href="#&#x8FD9;&#x4E2A;&#x662F;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;inputMessage&#x548C;inputCorrectionLevel&#x7684;&#x89E3;&#x91CA;" class="headerlink" title="&#x8FD9;&#x4E2A;&#x662F;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;inputMessage&#x548C;inputCorrectionLevel&#x7684;&#x89E3;&#x91CA;"></a>&#x8FD9;&#x4E2A;&#x662F;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;inputMessage&#x548C;inputCorrectionLevel&#x7684;&#x89E3;&#x91CA;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  [CIQRCodeGenerator ](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/#//apple_ref/doc/filter/ci/CIQRCodeGenerator)</span><br><span class="line"></span><br><span class="line">Generates a Quick Response code (two-dimensional barcode) from input data.</span><br><span class="line">Parameters</span><br><span class="line">*inputMessage*</span><br><span class="line">The data to be encoded as a QR code. AnNSData</span><br><span class="line">object whose display name is Message.</span><br><span class="line"></span><br><span class="line">*inputCorrectionLevel*</span><br><span class="line">A single letter specifying the error correction format. AnNSString</span><br><span class="line">object whose display name is CorrectionLevel.</span><br><span class="line">Default value:M</span><br><span class="line"></span><br><span class="line">Discussion</span><br><span class="line">    Generates an output image representing the input data according to the ISO/IEC 18004:2006 standard. The width and height of each module (square dot) of the code in the output image is one point. To create a QR code from a string or URL, convert it to an[NSData](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/index.html#//apple_ref/occ/cl/NSData)object using the[NSISOLatin1StringEncoding](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/index.html#//apple_ref/c/econst/NSISOLatin1StringEncoding)string encoding.</span><br><span class="line">The*inputCorrectionLevel*</span><br><span class="line">&#x3000;&#x3000;parameter controls the amount of additional data encoded in the output image to provide error correction. Higher levels of error correction result in larger output images but allow larger areas of the code to be damaged or obscured without. There are four possible correction modes (with corresponding error resilience levels):</span><br><span class="line">L&#x3000;: 7%</span><br><span class="line">M&#x3000;: 15%</span><br><span class="line">Q&#x3000;: 25%</span><br><span class="line">H&#x3000;: 30%</span><br><span class="line"></span><br><span class="line">Member Of</span><br><span class="line">CICategoryBuiltIn</span><br><span class="line">,CICategoryStillImage</span><br><span class="line">,CICategoryGenerator</span><br><span class="line">Sample Output</span><br><span class="line"> **Figure 91**The result of using the CIQRCodeGenerator filter ![image: ../Art/CIQRCodeGenerator.pdf](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Art/CIQRCodeGenerator_2x.png)</span><br></pre></td></tr></table></figure>
<p>&#x3000;&#x3000;&#x4FEE;&#x6539;&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x989C;&#x8272;,&#x8FD9;&#x4E00;&#x6BB5;&#x662F;&#x5728;&#x7F51;&#x4E0A;&#x627E;&#x7684;&#xFF0C;&#x628A;&#x751F;&#x6210;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#x4F20;&#x5165;&#xFF0C;&#x518D;&#x4F20;&#x5165;&#x60F3;&#x8981;&#x7684;&#x989C;&#x8272;&#x5373;&#x53EF;<br>&#x3000;&#x3000;&#x56FE;&#x7247;&#x8981;&#x4F20;&#x6CA1;&#x6709;&#x52A0;&#x8FC7; logo &#x7684;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage*)imageBlackToTransparent:(UIImage*)image withRed:(CGFloat)red andGreen:(CGFloat)green andBlue:(CGFloat)blue{</span><br><span class="line">    const int imageWidth = image.size.width;</span><br><span class="line">    const int imageHeight = image.size.height;</span><br><span class="line">    size_t bytesPerRow = imageWidth * 4;</span><br><span class="line">    uint32_t* rgbImageBuf = (uint32_t*)malloc(bytesPerRow * imageHeight);</span><br><span class="line">    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();</span><br><span class="line">    CGContextRef context = CGBitmapContextCreate(rgbImageBuf, imageWidth, imageHeight, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNoneSkipLast);</span><br><span class="line">    CGContextDrawImage(context, CGRectMake(0, 0, imageWidth, imageHeight), image.CGImage); // &#x904D;&#x5386;&#x50CF;&#x7D20;</span><br><span class="line">    int pixelNum = imageWidth * imageHeight;</span><br><span class="line">    uint32_t* pCurPtr = rgbImageBuf;</span><br><span class="line">    for (int i = 0; i &lt; pixelNum; i++, pCurPtr++){</span><br><span class="line">        if ((*pCurPtr &amp; 0xFFFFFF00) &lt; 0x99999900) // &#x5C06;&#x767D;&#x8272;&#x53D8;&#x6210;&#x900F;&#x660E;</span><br><span class="line">    {</span><br><span class="line">        // &#x6539;&#x6210;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x5C06;&#x56FE;&#x7247;&#x8F6C;&#x6210;&#x60F3;&#x8981;&#x7684;&#x989C;&#x8272;</span><br><span class="line">        uint8_t* ptr = (uint8_t*)pCurPtr;</span><br><span class="line">        ptr[3] = red; //0~255</span><br><span class="line">        ptr[2] = green;</span><br><span class="line">        ptr[1] = blue;</span><br><span class="line">    } else {</span><br><span class="line">        uint8_t* ptr = (uint8_t*)pCurPtr;</span><br><span class="line">        ptr[0] = 0;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    // &#x8F93;&#x51FA;&#x56FE;&#x7247;</span><br><span class="line">    CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, rgbImageBuf, bytesPerRow * imageHeight, nil);</span><br><span class="line">    CGImageRef imageRef = CGImageCreate(imageWidth, imageHeight, 8, 32, bytesPerRow, colorSpace, kCGImageAlphaLast | kCGBitmapByteOrder32Little, dataProvider, NULL, true, kCGRenderingIntentDefault);</span><br><span class="line">    CGDataProviderRelease(dataProvider);</span><br><span class="line">    UIImage* resultUIImage = [UIImage imageWithCGImage:imageRef]; // &#x6E05;&#x7406;&#x7A7A;&#x95F4;</span><br><span class="line">    CGImageRelease(imageRef);</span><br><span class="line">    CGContextRelease(context);</span><br><span class="line">    CGColorSpaceRelease(colorSpace);</span><br><span class="line">    return resultUIImage;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x626B;&#x7801;"><a href="#&#x626B;&#x7801;" class="headerlink" title="&#x626B;&#x7801;"></a>&#x626B;&#x7801;</h3><p>&#x3000;&#x3000;&#x626B;&#x7801;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x7684;&#x662F;AVFoundation&#x7528;&#x5230;&#x7684;&#x4E1C;&#x897F;&#x548C;&#x76F8;&#x673A;&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x76F8;&#x673A;&#x8BF7;&#x53C2;&#x8003;&#x6211;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;<br><img src="http://upload-images.jianshu.io/upload_images/966908-4540ac0268f17202.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&#x5C4F;&#x5E55;&#x5FEB;&#x7167; 2016-04-11 &#x4E0A;&#x5348;11.46.38.png"></p>
<h4 id="&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;&#xFF0C;&#x9075;&#x5B88;AVCaptureMetadataOutputObjectsDelegate"><a href="#&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;&#xFF0C;&#x9075;&#x5B88;AVCaptureMetadataOutputObjectsDelegate" class="headerlink" title="&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;&#xFF0C;&#x9075;&#x5B88;AVCaptureMetadataOutputObjectsDelegate"></a>&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;&#xFF0C;&#x9075;&#x5B88;AVCaptureMetadataOutputObjectsDelegate</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@interface ScanQRViewController ()&lt;AVCaptureMetadataOutputObjectsDelegate&gt;</span><br><span class="line">//&#x6355;&#x83B7;&#x8BBE;&#x5907;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#xFF0C;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#xFF0C;&#x9EA6;&#x514B;&#x98CE;&#xFF08;&#x97F3;&#x9891;&#x8F93;&#x5165;&#xFF09;</span><br><span class="line">@property(nonatomic)AVCaptureDevice *device;</span><br><span class="line"></span><br><span class="line">//AVCaptureDeviceInput &#x4EE3;&#x8868;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#xFF0C;&#x4ED6;&#x4F7F;&#x7528;AVCaptureDevice &#x6765;&#x521D;&#x59CB;&#x5316;</span><br><span class="line">@property(nonatomic)AVCaptureDeviceInput *input;</span><br><span class="line"></span><br><span class="line">//&#x8BBE;&#x7F6E;&#x8F93;&#x51FA;&#x7C7B;&#x578B;&#x4E3A;Metadata&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x79CD;&#x8F93;&#x51FA;&#x7C7B;&#x578B;&#x4E2D;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x626B;&#x63CF;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x8B6C;&#x5982;&#x4E8C;&#x7EF4;&#x7801;</span><br><span class="line">//&#x5F53;&#x542F;&#x52A8;&#x6444;&#x50CF;&#x5934;&#x5F00;&#x59CB;&#x6355;&#x83B7;&#x8F93;&#x5165;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8F93;&#x5165;&#x4E2D;&#x5305;&#x542B;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x8F93;&#x51FA;</span><br><span class="line">@property(nonatomic)AVCaptureMetadataOutput *output;</span><br><span class="line"></span><br><span class="line">//session&#xFF1A;&#x7531;&#x4ED6;&#x628A;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5E76;&#x5F00;&#x59CB;&#x542F;&#x52A8;&#x6355;&#x83B7;&#x8BBE;&#x5907;&#xFF08;&#x6444;&#x50CF;&#x5934;&#xFF09;</span><br><span class="line">@property(nonatomic)AVCaptureSession *session;</span><br><span class="line"></span><br><span class="line">//&#x56FE;&#x50CF;&#x9884;&#x89C8;&#x5C42;&#xFF0C;&#x5B9E;&#x65F6;&#x663E;&#x793A;&#x6355;&#x83B7;&#x7684;&#x56FE;&#x50CF;</span><br><span class="line">@property(nonatomic)AVCaptureVideoPreviewLayer *previewLayer;</span><br></pre></td></tr></table></figure>
<h4 id="&#x521D;&#x59CB;&#x5316;&#x5404;&#x5BF9;&#x8C61;&#xFF0C;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x7ED3;&#x5408;"><a href="#&#x521D;&#x59CB;&#x5316;&#x5404;&#x5BF9;&#x8C61;&#xFF0C;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x7ED3;&#x5408;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;&#x5404;&#x5BF9;&#x8C61;&#xFF0C;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x7ED3;&#x5408;"></a>&#x521D;&#x59CB;&#x5316;&#x5404;&#x5BF9;&#x8C61;&#xFF0C;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x7ED3;&#x5408;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">- (void)creatCaptureDevice{</span><br><span class="line">    //&#x4F7F;&#x7528;AVMediaTypeVideo &#x6307;&#x660E;self.device&#x4EE3;&#x8868;&#x89C6;&#x9891;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;</span><br><span class="line">    self.device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];</span><br><span class="line"></span><br><span class="line">    //&#x4F7F;&#x7528;&#x8BBE;&#x5907;&#x521D;&#x59CB;&#x5316;&#x8F93;&#x5165;</span><br><span class="line">    self.input = [[AVCaptureDeviceInput alloc]initWithDevice:self.device error:nil];</span><br><span class="line"></span><br><span class="line">    //&#x751F;&#x6210;&#x8F93;&#x51FA;&#x5BF9;&#x8C61;</span><br><span class="line">    self.output = [[AVCaptureMetadataOutput alloc]init];</span><br><span class="line"></span><br><span class="line">    //&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;&#xFF0C;&#x4E00;&#x65E6;&#x626B;&#x63CF;&#x5230;&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x4F1A;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x8F93;&#x51FA;</span><br><span class="line">    //&#x5728;&#x626B;&#x63CF;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F1A;&#x5206;&#x6790;&#x626B;&#x63CF;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5206;&#x6790;&#x6210;&#x529F;&#x540E;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x8F93;&#x51FA;</span><br><span class="line">    [self.output setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];</span><br><span class="line"></span><br><span class="line">    //&#x751F;&#x6210;&#x4F1A;&#x8BDD;&#xFF0C;&#x7528;&#x6765;&#x7ED3;&#x5408;&#x8F93;&#x5165;&#x8F93;&#x51FA;</span><br><span class="line">    self.session = [[AVCaptureSession alloc]init];</span><br><span class="line">    if ([self.session canAddInput:self.input]) {</span><br><span class="line">        [self.session addInput:self.input];</span><br><span class="line">    }</span><br><span class="line">    if ([self.session canAddOutput:self.output]) {</span><br><span class="line">        [self.session addOutput:self.output];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    //&#x6307;&#x5B9A;&#x5F53;&#x626B;&#x63CF;&#x5230;&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4EA7;&#x751F;&#x8F93;&#x51FA;</span><br><span class="line">    //AVMetadataObjectTypeQRCode &#x6307;&#x5B9A;&#x4E8C;&#x7EF4;&#x7801;</span><br><span class="line">    //&#x6307;&#x5B9A;&#x8BC6;&#x522B;&#x7C7B;&#x578B;&#x4E00;&#x5B9A;&#x8981;&#x653E;&#x5230;&#x6DFB;&#x52A0;&#x5230;session&#x4E4B;&#x540E;</span><br><span class="line">    [self.output setMetadataObjectTypes:@[AVMetadataObjectTypeQRCode]];</span><br><span class="line">//&#x8BBE;&#x7F6E;&#x626B;&#x63CF;&#x4FE1;&#x606F;&#x7684;&#x8BC6;&#x522B;&#x533A;&#x57DF;&#xFF0C;&#x5DE6;&#x4E0A;&#x89D2;&#x4E3A;(0,0),&#x53F3;&#x4E0B;&#x89D2;&#x4E3A;(1,1),&#x4E0D;&#x8BBE;&#x7684;&#x8BDD;&#x5168;&#x5C4F;&#x90FD;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;&#x3002;&#x8BBE;&#x7F6E;&#x8FC7;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x7F29;&#x5C0F;&#x4FE1;&#x606F;&#x626B;&#x63CF;&#x9762;&#x79EF;&#x52A0;&#x5FEB;&#x8BC6;&#x522B;&#x901F;&#x5EA6;&#x3002;</span><br><span class="line">//&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5E76;&#x4E0D;&#x597D;&#x8BBE;&#x7F6E;&#xFF0C;&#x6574;&#x4E86;&#x534A;&#x5929;&#x4E5F;&#x6CA1;&#x592A;&#x641E;&#x660E;&#x767D;&#xFF0C;&#x5230;&#x5E95;x,y,width,height,&#x600E;&#x4E48;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x6211;&#x4E00;&#x70B9;&#x4E00;&#x70B9;&#x8BD5;&#x7684;&#x626B;&#x63CF;&#x533A;&#x57DF;&#xFF0C;&#x770B;&#x4E0D;&#x5230;&#x53EA;&#x80FD;&#x8C03;&#x4E00;&#x4E0B;&#xFF0C;&#x626B;&#x4E00;&#x626B;&#x8BD5;&#x8BD5;</span><br><span class="line">    [self.output setRectOfInterest:CGRectMake(0.1 ,0.3 , 0.4, 0.4)];</span><br><span class="line">    //&#x4F7F;&#x7528;self.session&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x9884;&#x89C8;&#x5C42;&#xFF0C;self.session&#x8D1F;&#x8D23;&#x9A71;&#x52A8;input&#x8FDB;&#x884C;&#x4FE1;&#x606F;&#x7684;&#x91C7;&#x96C6;&#xFF0C;layer&#x8D1F;&#x8D23;&#x628A;&#x56FE;&#x50CF;&#x6E32;&#x67D3;&#x663E;&#x793A;</span><br><span class="line">    self.previewLayer = [[AVCaptureVideoPreviewLayer alloc]initWithSession:self.session];</span><br><span class="line">    self.previewLayer.frame = CGRectMake(0, 0, kScreenWidth , kScreenHeight);</span><br><span class="line">    self.previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;</span><br><span class="line">    [self.view.layer addSublayer:self.previewLayer];</span><br><span class="line"></span><br><span class="line">    //&#x5F00;&#x59CB;&#x542F;&#x52A8;</span><br><span class="line">    [self.session startRunning];</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="&#x5B9E;&#x73B0;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;"><a href="#&#x5B9E;&#x73B0;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;" class="headerlink" title="&#x5B9E;&#x73B0;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;"></a>&#x5B9E;&#x73B0;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark &#x8F93;&#x51FA;&#x7684;&#x4EE3;&#x7406;</span><br><span class="line">//metadataObjects &#xFF1A;&#x628A;&#x8BC6;&#x522B;&#x5230;&#x7684;&#x5185;&#x5BB9;&#x653E;&#x5230;&#x8BE5;&#x6570;&#x7EC4;&#x4E2D;</span><br><span class="line">- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputMetadataObjects:(NSArray *)metadataObjects fromConnection:(AVCaptureConnection *)connection</span><br><span class="line">{</span><br><span class="line">    //&#x505C;&#x6B62;&#x626B;&#x63CF;</span><br><span class="line">    [self.session stopRunning];</span><br><span class="line">    [self.timer invalidate];</span><br><span class="line">    self.timer = nil;</span><br><span class="line">    [self.lineView removeFromSuperview];</span><br><span class="line">    if ([metadataObjects count] &gt;= 1) {</span><br><span class="line">        //&#x6570;&#x7EC4;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x90FD;&#x662F;AVMetadataMachineReadableCodeObject &#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x4E2D;&#x5305;&#x542B;&#x89E3;&#x7801;&#x540E;&#x7684;&#x6570;&#x636E;</span><br><span class="line">        AVMetadataMachineReadableCodeObject *qrObject = [metadataObjects lastObject];</span><br><span class="line">        &#x62FF;&#x5230;&#x626B;&#x63CF;&#x5185;&#x5BB9;&#x5728;&#x8FD9;&#x91CC;&#x8FDB;&#x884C;&#x4E2A;&#x6027;&#x5316;&#x5904;&#x7406;</span><br><span class="line">        NSLog(@&quot;&#x8BC6;&#x522B;&#x6210;&#x529F;%@&quot;,qrObject.stringValue);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;"><a href="#&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;" class="headerlink" title="&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;"></a>&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;</h3><p>&#xFF08;1&#xFF09;&#x4E8C;&#x7EF4;&#x7801;&#x4E0A;&#x52A0;logo&#x56FE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x56FE;&#x7247;&#x5F88;&#x6A21;&#x7CCA;&#xFF0C;&#x8FD9;&#x662F;&#x7531;&#x4E8E;UIGraphicsBeginImageContextWithOptions&#x91CC;&#x7684; scale &#x9020;&#x6210;&#x7684;&#xFF0C;&#x7531;&#x4E8E; iPhone &#x7684;&#x5C4F;&#x5E55;&#x90FD;&#x662F;retina&#x5C4F;&#x5E55;&#xFF0C;&#x90FD;&#x662F;2&#x500D;&#xFF0C;3&#x500D;&#x50CF;&#x7D20;&#xFF0C;&#x8FD9;&#x91CC;&#x7684; scale &#x8981;&#x6839;&#x636E;&#x5C4F;&#x5E55;&#x6765;&#x8BBE;&#x7F6E; &#x5373;[[UIScreen mainScreen] scale]&#x8FD9;&#x6837;&#x56FE;&#x7247;&#x5C31;&#x4F1A;&#x5F88;&#x6E05;&#x6670;<br>&#xFF08;2&#xFF09;setRectOfInterest&#xFF1A;&#x8BBE;&#x7F6E;&#x626B;&#x63CF;&#x4FE1;&#x606F;&#x7684;&#x8BC6;&#x522B;&#x533A;&#x57DF;&#xFF0C;&#x5DE6;&#x4E0A;&#x89D2;&#x4E3A;(0,0),&#x53F3;&#x4E0B;&#x89D2;&#x4E3A;(1,1),&#x4E0D;&#x8BBE;&#x7684;&#x8BDD;&#x5168;&#x5C4F;&#x90FD;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;&#x3002;&#x8BBE;&#x7F6E;&#x8FC7;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x7F29;&#x5C0F;&#x4FE1;&#x606F;&#x626B;&#x63CF;&#x9762;&#x79EF;&#x52A0;&#x5FEB;&#x8BC6;&#x522B;&#x901F;&#x5EA6;&#xFF0C;&#x539F;&#x6765;&#x626B;&#x63CF;&#x7684;&#x662F;&#x6574;&#x4E2A;&#x5C4F;&#x5E55;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x53EA;&#x626B;&#x63CF;&#x4E00;&#x5757;&#x533A;&#x57DF;&#xFF0C;&#x4EE5;&#x6B64;&#x52A0;&#x5FEB;&#x8BC6;&#x522B;&#x901F;&#x5EA6;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5E76;&#x4E0D;&#x597D;&#x8BBE;&#x7F6E;&#xFF0C;&#x6574;&#x4E86;&#x534A;&#x5929;&#x4E5F;&#x6CA1;&#x592A;&#x641E;&#x660E;&#x767D;&#xFF0C;&#x5230;&#x5E95;x,y,width,height,&#x600E;&#x4E48;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x6BD4;&#x4F8B;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x6211;&#x662F;&#x4E00;&#x70B9;&#x4E00;&#x70B9;&#x8BD5;&#x7684;&#x626B;&#x63CF;&#x533A;&#x57DF;&#xFF0C;&#x770B;&#x4E0D;&#x5230;&#x60C5;&#x51B5;&#xFF0C;&#x53EA;&#x80FD;&#x8C03;&#x4E00;&#x4E0B;&#xFF0C;&#x626B;&#x4E00;&#x626B;&#x8BD5;&#x8BD5;<br>&#x6700;&#x540E;&#x4E5F;&#x6CA1;&#x6574;&#x660E;&#x767D;&#xFF0C;&#x54EA;&#x4F4D;&#x5927;&#x795E;&#x77E5;&#x9053;&#xFF0C;&#x6C42;&#x89E3;&#x7B54;<br>&#x9644;&#x4E0A;&#x5B98;&#x65B9;&#x89E3;&#x91CA;:<br>    The value of this property is a CGRect that determines the receiver&#x2019;s rectangle of interest for each frame of video.<br>    The rectangle&#x2019;s origin is top left and is relative to the coordinate space of the device providing the metadata.  Specifying<br>    a rectOfInterest may improve detection performance for certain types of metadata. The default value of this property is the<br>    value CGRectMake(0, 0, 1, 1).  Metadata objects whose bounds do not intersect with the rectOfInterest will not be returned.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[30分钟搞定iOS自定义相机]]></title>
      <url>http://nanshanyi.github.io/2016/05/07/xiangji/</url>
      <content type="html"><![CDATA[<p>&#x3000;&#x3000;&#x6700;&#x8FD1;&#x516C;&#x53F8;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x7528;&#x5230;&#x4E86;&#x76F8;&#x673A;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x76F8;&#x673A;&#xFF0C;UI&#x7ED9;&#x7684;&#x76F8;&#x673A;&#x5207;&#x56FE;&#xFF0C;&#x5FC5;&#x987B;&#x81EA;&#x5B9A;&#x4E49;&#x624D;&#x53EF;&#x4EE5;&#x3002;&#x5C31;&#x82B1;&#x65F6;&#x95F4;&#x7B80;&#x5355;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#x76F8;&#x673A;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x3002;<br>&#x3000;&#x3000;&#x76F8;&#x673A;&#x5C5E;&#x4E8E;&#x7CFB;&#x7EDF;&#x786C;&#x4EF6;&#xFF0C;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x6765;&#x624B;&#x52A8;&#x8C03;&#x7528;iPhone&#x7684;&#x76F8;&#x673A;&#x786C;&#x4EF6;&#xFF0C;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#xFF1A;<br><a id="more"></a><br><img src="/2016/05/07/xiangji/camera.png" alt=""></p>
<h4 id="&#x9996;&#x5148;&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;"><a href="#&#x9996;&#x5148;&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;" class="headerlink" title="&#x9996;&#x5148;&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;"></a>&#x9996;&#x5148;&#x58F0;&#x660E;&#x4EE5;&#x4E0B;&#x5BF9;&#x8C61;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;AVFoundation/AVFoundation.h&gt;</span><br><span class="line">//&#x6355;&#x83B7;&#x8BBE;&#x5907;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#xFF0C;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#xFF0C;&#x9EA6;&#x514B;&#x98CE;&#xFF08;&#x97F3;&#x9891;&#x8F93;&#x5165;&#xFF09;</span><br><span class="line">@property (nonatomic, strong) AVCaptureDevice *device;</span><br><span class="line"></span><br><span class="line">//AVCaptureDeviceInput &#x4EE3;&#x8868;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#xFF0C;&#x4ED6;&#x4F7F;&#x7528;AVCaptureDevice &#x6765;&#x521D;&#x59CB;&#x5316;</span><br><span class="line">@property (nonatomic, strong) AVCaptureDeviceInput *input;</span><br><span class="line"></span><br><span class="line">//&#x8F93;&#x51FA;&#x56FE;&#x7247;</span><br><span class="line">@property (nonatomic ,strong) AVCaptureStillImageOutput *imageOutput;</span><br><span class="line"></span><br><span class="line">//session&#xFF1A;&#x7531;&#x4ED6;&#x628A;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5E76;&#x5F00;&#x59CB;&#x542F;&#x52A8;&#x6355;&#x83B7;&#x8BBE;&#x5907;&#xFF08;&#x6444;&#x50CF;&#x5934;&#xFF09;</span><br><span class="line">@property (nonatomic, strong) AVCaptureSession *session;</span><br><span class="line"></span><br><span class="line">//&#x56FE;&#x50CF;&#x9884;&#x89C8;&#x5C42;&#xFF0C;&#x5B9E;&#x65F6;&#x663E;&#x793A;&#x6355;&#x83B7;&#x7684;&#x56FE;&#x50CF;</span><br><span class="line">@property (nonatomic ,strong) AVCaptureVideoPreviewLayer *previewLayer;</span><br></pre></td></tr></table></figure>
<h4 id="&#x521D;&#x59CB;&#x5316;&#x5404;&#x4E2A;&#x5BF9;&#x8C61;"><a href="#&#x521D;&#x59CB;&#x5316;&#x5404;&#x4E2A;&#x5BF9;&#x8C61;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;&#x5404;&#x4E2A;&#x5BF9;&#x8C61;"></a>&#x521D;&#x59CB;&#x5316;&#x5404;&#x4E2A;&#x5BF9;&#x8C61;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">- (void)cameraDistrict</span><br><span class="line">{</span><br><span class="line">//    AVCaptureDevicePositionBack  &#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;</span><br><span class="line">//    AVCaptureDevicePositionFront &#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;</span><br><span class="line">   self.device = [self cameraWithPosition:AVCaptureDevicePositionFront];</span><br><span class="line">    self.input = [[AVCaptureDeviceInput alloc] initWithDevice:self.device error:nil];</span><br><span class="line"></span><br><span class="line">    self.imageOutput = [[AVCaptureStillImageOutput alloc] init];</span><br><span class="line"></span><br><span class="line">    self.session = [[AVCaptureSession alloc] init];</span><br><span class="line">    //     &#x62FF;&#x5230;&#x7684;&#x56FE;&#x50CF;&#x7684;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x8BBE;&#x5B9A;</span><br><span class="line">    //    AVCaptureSessionPreset320x240</span><br><span class="line">    //    AVCaptureSessionPreset352x288</span><br><span class="line">    //    AVCaptureSessionPreset640x480</span><br><span class="line">    //    AVCaptureSessionPreset960x540</span><br><span class="line">    //    AVCaptureSessionPreset1280x720</span><br><span class="line">    //    AVCaptureSessionPreset1920x1080</span><br><span class="line">    //    AVCaptureSessionPreset3840x2160</span><br><span class="line">    self.session.sessionPreset = AVCaptureSessionPreset640x480;</span><br><span class="line">    //&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x7ED3;&#x5408;</span><br><span class="line">    if ([self.session canAddInput:self.input]) {</span><br><span class="line">        [self.session addInput:self.input];</span><br><span class="line">    }</span><br><span class="line">    if ([self.session canAddOutput:self.imageOutput]) {</span><br><span class="line">        [self.session addOutput:self.imageOutput];</span><br><span class="line">    }</span><br><span class="line">    //&#x9884;&#x89C8;&#x5C42;&#x7684;&#x751F;&#x6210;</span><br><span class="line">    self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.session];</span><br><span class="line">    self.previewLayer.frame = CGRectMake(0, 64, SCREEN_WIDTH, SCREEN_HEIGHT-64);</span><br><span class="line">    self.previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;</span><br><span class="line">    [self.view.layer addSublayer:self.previewLayer];</span><br><span class="line">    //&#x8BBE;&#x5907;&#x53D6;&#x666F;&#x5F00;&#x59CB;</span><br><span class="line">    [self.session startRunning];</span><br><span class="line">    if ([_device lockForConfiguration:nil]) {</span><br><span class="line">    //&#x81EA;&#x52A8;&#x95EA;&#x5149;&#x706F;&#xFF0C;</span><br><span class="line">        if ([_device isFlashModeSupported:AVCaptureFlashModeAuto]) {</span><br><span class="line">            [_device setFlashMode:AVCaptureFlashModeAuto];</span><br><span class="line">        }</span><br><span class="line">        //&#x81EA;&#x52A8;&#x767D;&#x5E73;&#x8861;,&#x4F46;&#x662F;&#x597D;&#x50CF;&#x4E00;&#x76F4;&#x90FD;&#x8FDB;&#x4E0D;&#x53BB;</span><br><span class="line">        if ([_device isWhiteBalanceModeSupported:AVCaptureWhiteBalanceModeAutoWhiteBalance]) {</span><br><span class="line">            [_device setWhiteBalanceMode:AVCaptureWhiteBalanceModeAutoWhiteBalance];</span><br><span class="line">        }</span><br><span class="line">        [_device unlockForConfiguration];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>  &#x6839;&#x636E;&#x524D;&#x540E;&#x7F6E;&#x4F4D;&#x7F6E;&#x62FF;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x6444;&#x50CF;&#x5934;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (AVCaptureDevice *)cameraWithPosition:(AVCaptureDevicePosition)position{</span><br><span class="line">    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];</span><br><span class="line">    for ( AVCaptureDevice *device in devices )</span><br><span class="line">        if ( device.position == position ){</span><br><span class="line">            return device;</span><br><span class="line">        }</span><br><span class="line">    return nil;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x62CD;&#x7167;&#x62FF;&#x5230;&#x76F8;&#x5E94;&#x56FE;&#x7247;&#xFF1A;"><a href="#&#x62CD;&#x7167;&#x62FF;&#x5230;&#x76F8;&#x5E94;&#x56FE;&#x7247;&#xFF1A;" class="headerlink" title="&#x62CD;&#x7167;&#x62FF;&#x5230;&#x76F8;&#x5E94;&#x56FE;&#x7247;&#xFF1A;"></a>&#x62CD;&#x7167;&#x62FF;&#x5230;&#x76F8;&#x5E94;&#x56FE;&#x7247;&#xFF1A;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (void)photoBtnDidClick</span><br><span class="line">{</span><br><span class="line">    AVCaptureConnection *conntion = [self.imageOutput connectionWithMediaType:AVMediaTypeVideo];</span><br><span class="line">      if (!conntion) {</span><br><span class="line">          NSLog(@&quot;&#x62CD;&#x7167;&#x5931;&#x8D25;!&quot;);</span><br><span class="line">          return;</span><br><span class="line">          }</span><br><span class="line">    [self.imageOutput captureStillImageAsynchronouslyFromConnection:conntion completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {</span><br><span class="line">        if (imageDataSampleBuffer == nil) {</span><br><span class="line">            return ;</span><br><span class="line">          }</span><br><span class="line">        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];</span><br><span class="line">        self.image = [UIImage imageWithData:imageData];</span><br><span class="line">        [self.session stopRunning];</span><br><span class="line">        [self.view addSubview:self.cameraImageView];</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="&#x4FDD;&#x5B58;&#x7167;&#x7247;&#x5230;&#x76F8;&#x518C;&#xFF1A;"><a href="#&#x4FDD;&#x5B58;&#x7167;&#x7247;&#x5230;&#x76F8;&#x518C;&#xFF1A;" class="headerlink" title="&#x4FDD;&#x5B58;&#x7167;&#x7247;&#x5230;&#x76F8;&#x518C;&#xFF1A;"></a>&#x4FDD;&#x5B58;&#x7167;&#x7247;&#x5230;&#x76F8;&#x518C;&#xFF1A;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#pragma - &#x4FDD;&#x5B58;&#x81F3;&#x76F8;&#x518C;</span><br><span class="line">- (void)saveImageToPhotoAlbum:(UIImage*)savedImage</span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    UIImageWriteToSavedPhotosAlbum(savedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">// &#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;</span><br><span class="line"></span><br><span class="line">- (void)image: (UIImage *) image didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo</span><br><span class="line"></span><br><span class="line">{</span><br><span class="line">    NSString *msg = nil ;</span><br><span class="line">    if(error != NULL){</span><br><span class="line">        msg = @&quot;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x5931;&#x8D25;&quot; ;</span><br><span class="line">    }else{</span><br><span class="line">        msg = @&quot;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x6210;&#x529F;&quot; ;</span><br><span class="line">    }</span><br><span class="line">    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x7ED3;&#x679C;&#x63D0;&#x793A;&quot;</span><br><span class="line">                                            message:msg</span><br><span class="line">                                            delegate:self</span><br><span class="line">                                          cancelButtonTitle:@&quot;&#x786E;&#x5B9A;&quot;</span><br><span class="line">                                          otherButtonTitles:nil];</span><br><span class="line">    [alert show];</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;"><a href="#&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;" class="headerlink" title="&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;"></a>&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">- (void)changeCamera{</span><br><span class="line">    NSUInteger cameraCount = [[AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo] count];</span><br><span class="line">    if (cameraCount &gt; 1) {</span><br><span class="line">        NSError *error;</span><br><span class="line">        //&#x7ED9;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;&#x6DFB;&#x52A0;&#x7FFB;&#x8F6C;&#x52A8;&#x753B;</span><br><span class="line">        CATransition *animation = [CATransition animation]&#xFF1B;</span><br><span class="line">        animation.duration = .5f&#xFF1B;</span><br><span class="line">        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">        animation.type = @&quot;oglFlip&quot;;</span><br><span class="line"></span><br><span class="line">        AVCaptureDevice *newCamera = nil;</span><br><span class="line">        AVCaptureDeviceInput *newInput = nil;</span><br><span class="line">  //&#x62FF;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x6444;&#x50CF;&#x5934;&#x4F4D;&#x7F6E;</span><br><span class="line">        AVCaptureDevicePosition position = [[_input device] position];</span><br><span class="line">        if (position == AVCaptureDevicePositionFront){</span><br><span class="line">            newCamera = [self cameraWithPosition:AVCaptureDevicePositionBack];</span><br><span class="line">            animation.subtype = kCATransitionFromLeft;//&#x52A8;&#x753B;&#x7FFB;&#x8F6C;&#x65B9;&#x5411;</span><br><span class="line">        }</span><br><span class="line">        else {</span><br><span class="line">            newCamera = [self cameraWithPosition:AVCaptureDevicePositionFront];</span><br><span class="line">            animation.subtype = kCATransitionFromRight;//&#x52A8;&#x753B;&#x7FFB;&#x8F6C;&#x65B9;&#x5411;</span><br><span class="line">        }</span><br><span class="line">        //&#x751F;&#x6210;&#x65B0;&#x7684;&#x8F93;&#x5165;</span><br><span class="line">        newInput = [AVCaptureDeviceInput deviceInputWithDevice:newCamera error:nil];</span><br><span class="line">        [self.previewLayer addAnimation:animation forKey:nil];</span><br><span class="line">        if (newInput != nil) {</span><br><span class="line">            [self.session beginConfiguration];</span><br><span class="line">            [self.session removeInput:self.input];</span><br><span class="line">            if ([self.session canAddInput:newInput]) {</span><br><span class="line">                [self.session addInput:newInput];</span><br><span class="line">                self.input = newInput;</span><br><span class="line"></span><br><span class="line">            } else {</span><br><span class="line">                [self.session addInput:self.input];</span><br><span class="line">            }</span><br><span class="line">            [self.session commitConfiguration];</span><br><span class="line"></span><br><span class="line">        } else if (error) {</span><br><span class="line">            NSLog(@&quot;toggle carema failed, error = %@&quot;, error);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="&#x76F8;&#x673A;&#x7684;&#x5176;&#x5B83;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;"><a href="#&#x76F8;&#x673A;&#x7684;&#x5176;&#x5B83;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;" class="headerlink" title="&#x76F8;&#x673A;&#x7684;&#x5176;&#x5B83;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;"></a>&#x76F8;&#x673A;&#x7684;&#x5176;&#x5B83;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;</h4><pre><code>//AVCaptureFlashMode  &#x95EA;&#x5149;&#x706F;
//AVCaptureFocusMode  &#x5BF9;&#x7126;
//AVCaptureExposureMode  &#x66DD;&#x5149;
//AVCaptureWhiteBalanceMode  &#x767D;&#x5E73;&#x8861;
//&#x95EA;&#x5149;&#x706F;&#x548C;&#x767D;&#x5E73;&#x8861;&#x53EF;&#x4EE5;&#x5728;&#x751F;&#x6210;&#x76F8;&#x673A;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;
//&#x66DD;&#x5149;&#x8981;&#x6839;&#x636E;&#x5BF9;&#x7126;&#x70B9;&#x7684;&#x5149;&#x7EBF;&#x72B6;&#x51B5;&#x800C;&#x51B3;&#x5B9A;,&#x6240;&#x4EE5;&#x548C;&#x5BF9;&#x7126;&#x4E00;&#x5757;&#x5199;
//point&#x4E3A;&#x70B9;&#x51FB;&#x7684;&#x4F4D;&#x7F6E;
- (void)focusAtPoint:(CGPoint)point{
    CGSize size = self.view.bounds.size;
    CGPoint focusPoint = CGPointMake( point.y /size.height ,1-point.x/size.width );
    NSError *error;
    if ([self.device lockForConfiguration:&amp;error]) {
        //&#x5BF9;&#x7126;&#x6A21;&#x5F0F;&#x548C;&#x5BF9;&#x7126;&#x70B9;
        if ([self.device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {
            [self.device setFocusPointOfInterest:focusPoint];
            [self.device setFocusMode:AVCaptureFocusModeAutoFocus];
        }
        //&#x66DD;&#x5149;&#x6A21;&#x5F0F;&#x548C;&#x66DD;&#x5149;&#x70B9;
        if ([self.device isExposureModeSupported:AVCaptureExposureModeAutoExpose ]) {
            [self.device setExposurePointOfInterest:focusPoint];
            [self.device setExposureMode:AVCaptureExposureModeAutoExpose];
        }

        [self.device unlockForConfiguration];
        //&#x8BBE;&#x7F6E;&#x5BF9;&#x7126;&#x52A8;&#x753B;
        _focusView.center = point;
        _focusView.hidden = NO;
        [UIView animateWithDuration:0.3 animations:^{
            _focusView.transform = CGAffineTransformMakeScale(1.25, 1.25);
        }completion:^(BOOL finished) {
            [UIView animateWithDuration:0.5 animations:^{
                _focusView.transform = CGAffineTransformIdentity;
            } completion:^(BOOL finished) {
                _focusView.hidden = YES;
            }];
        }];
    }

}
</code></pre><h4 id="&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;"><a href="#&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;" class="headerlink" title="&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;"></a>&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x548C;&#x89E3;&#x51B3;&#x529E;&#x6CD5;</h4><h5 id="1-&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;"><a href="#1-&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;" class="headerlink" title="1) &#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;"></a>1) &#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x7684;&#x5207;&#x6362;</h5><p>&#x3000;&#x3000;&#x524D;&#x540E;&#x503C;&#x4E0D;&#x80FD;&#x5207;&#x6362;&#xFF0C;&#x5404;&#x79CD;&#x5C1D;&#x8BD5;&#x627E;&#x4E86;&#x534A;&#x5929;&#x6CA1;&#x627E;&#x5230;&#x6709;&#x539F;&#x56E0;&#x3002;&#x540E;&#x6765;&#x53D1;&#x73B0;&#x6211;&#x5728;&#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x7684;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;&#x4E3A;1080P [self.session canSetSessionPreset: AVCaptureSessionPreset1920x1080]   &#xFF0C;&#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x5E76;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x4E0D;&#x80FD;&#x5207;&#x6362;&#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x3002;&#x6211;&#x9A8C;&#x8BC1;&#x4E86;&#x4E0B; &#x524D;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x6700;&#x9AD8;&#x652F;&#x6301;720P,720P&#x4EE5;&#x5185;&#x53EF;&#x81EA;&#x7531;&#x5207;&#x6362;&#x3002;&#x3000;&#x3000;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x524D;&#x540E;&#x7F6E;&#x6444;&#x50CF;&#x5934;&#x5207;&#x6362;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6839;&#x636E;&#x524D;&#x540E;&#x6444;&#x50CF;&#x5934;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x5728;&#x8D58;&#x8FF0;&#x3002;</p>
<h5 id="2&#xFF09;&#x7126;&#x70B9;&#x4F4D;&#x7F6E;"><a href="#2&#xFF09;&#x7126;&#x70B9;&#x4F4D;&#x7F6E;" class="headerlink" title="2&#xFF09;&#x7126;&#x70B9;&#x4F4D;&#x7F6E;"></a>2&#xFF09;&#x7126;&#x70B9;&#x4F4D;&#x7F6E;</h5><p>&#x3000;&#x3000;CGPoint focusPoint = CGPointMake( point.y /size.height ,1-point.x/size.width );<br>setExposurePointOfInterest&#xFF1A;focusPoint &#x51FD;&#x6570;&#x540E;&#x9762;Point&#x53D6;&#x503C;&#x8303;&#x56F4;&#x662F;&#x53D6;&#x666F;&#x6846;&#x5DE6;&#x4E0A;&#x89D2;&#xFF08;0&#xFF0C;0&#xFF09;&#x5230;&#x53D6;&#x666F;&#x6846;&#x53F3;&#x4E0B;&#x89D2;&#xFF08;1&#xFF0C;1&#xFF09;&#x4E4B;&#x95F4;&#x3002;&#x5B98;&#x65B9;&#x662F;&#x8FD9;&#x4E48;&#x5199;&#x7684;&#xFF1A;<br>&#x3000;&#x3000;The value of this property is a CGPoint that determines the receiver&#x2019;s focus point of interest, if it has one. A value of (0,0) indicates that the camera should focus on the top left corner of the image, while a value of (1,1) indicates that it should focus on the bottom right. The default value is (0.5,0.5).<br>&#x3000;&#x3000;&#x6211;&#x4E5F;&#x8BD5;&#x4E86;&#x6309;&#x8FD9;&#x4E2A;&#x6765;&#x4F46;&#x4F4D;&#x7F6E;&#x5C31;&#x662F;&#x4E0D;&#x5BF9;&#xFF0C;&#x53EA;&#x80FD;&#x6309;&#x4E0A;&#x9762;&#x7684;&#x5199;&#x6CD5;&#x624D;&#x53EF;&#x4EE5;&#x3002;&#x524D;&#x9762;&#x662F;&#x70B9;&#x51FB;&#x4F4D;&#x7F6E;&#x7684;y/PreviewLayer&#x7684;&#x9AD8;&#x5EA6;&#xFF0C;&#x540E;&#x9762;&#x662F;1-&#x70B9;&#x51FB;&#x4F4D;&#x7F6E;&#x7684;x/PreviewLayer&#x7684;&#x5BBD;&#x5EA6;</p>
<h5 id="3&#xFF09;&#x5BF9;&#x7126;&#x548C;&#x66DD;&#x5149;"><a href="#3&#xFF09;&#x5BF9;&#x7126;&#x548C;&#x66DD;&#x5149;" class="headerlink" title="3&#xFF09;&#x5BF9;&#x7126;&#x548C;&#x66DD;&#x5149;"></a>3&#xFF09;&#x5BF9;&#x7126;&#x548C;&#x66DD;&#x5149;</h5><p>&#x3000;&#x3000;&#x6211;&#x5728;&#x8BBE;&#x7F6E;&#x5BF9;&#x7126;&#x662F; &#x5148;&#x8BBE;&#x7F6E;&#x4E86;&#x6A21;&#x5F0F;setFocusMode&#xFF0C;&#x540E;&#x8BBE;&#x7F6E;&#x5BF9;&#x7126;&#x4F4D;&#x7F6E;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x5F88;&#x5947;&#x602A;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x5BF9;&#x7126;&#x4F4D;&#x7F6E;&#x662F;&#x4F60;&#x4E0A;&#x6B21;&#x70B9;&#x51FB;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x5B9A;&#x8981;&#x5148;&#x8BBE;&#x7F6E;&#x4F4D;&#x7F6E;&#xFF0C;&#x518D;&#x8BBE;&#x7F6E;&#x5BF9;&#x7126;&#x6A21;&#x5F0F;&#x3002;<br>&#x3000;&#x3000;&#x66DD;&#x5149;&#x540C;&#x4E0A;</p>
<h4 id="&#x5199;&#x5728;&#x6700;&#x540E;"><a href="#&#x5199;&#x5728;&#x6700;&#x540E;" class="headerlink" title="&#x5199;&#x5728;&#x6700;&#x540E;"></a>&#x5199;&#x5728;&#x6700;&#x540E;</h4><p>&#x3000;&#x3000;&#x9644;&#x4E0A; <a href="https://github.com/nanshanyi/photographDemo" target="_blank" rel="external">demo</a><br>&#x3000;&#x3000;&#x5E38;&#x7528;&#x5230;&#x7684;&#x57FA;&#x672C;&#x5C31;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5199;&#x7684;&#x5E76;&#x4E0D;&#x5B8C;&#x5584;&#xFF0C;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x5BF9;&#x7684;&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x6279;&#x8BC4;&#x6307;&#x6B63;&#xFF0C;&#x5171;&#x540C;&#x5B66;&#x4E60;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[3DTouch应用详解]]></title>
      <url>http://nanshanyi.github.io/2016/04/20/3dtouch/</url>
      <content type="html"><![CDATA[<p>3D touch&#x4E5F;&#x51FA;&#x4E86;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x8FD9;&#x6B21;&#x82B1;&#x65F6;&#x95F4;&#x597D;&#x597D;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x628A;&#x7ECF;&#x9A8C;&#x4E0E;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;</p>
<h4 id="&#x4E3B;&#x754C;&#x9762;&#x91CD;&#x6309;APP&#x56FE;&#x6807;&#xFF0C;&#x5F39;&#x51FA;Touch&#x83DC;&#x5355;"><a href="#&#x4E3B;&#x754C;&#x9762;&#x91CD;&#x6309;APP&#x56FE;&#x6807;&#xFF0C;&#x5F39;&#x51FA;Touch&#x83DC;&#x5355;" class="headerlink" title="&#x4E3B;&#x754C;&#x9762;&#x91CD;&#x6309;APP&#x56FE;&#x6807;&#xFF0C;&#x5F39;&#x51FA;Touch&#x83DC;&#x5355;"></a>&#x4E3B;&#x754C;&#x9762;&#x91CD;&#x6309;APP&#x56FE;&#x6807;&#xFF0C;&#x5F39;&#x51FA;Touch&#x83DC;&#x5355;</h4><p>&#x3000;&#x9759;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;<br>&#x3000;&#x3000;&#x3000;(iOS&#x6570;&#x7EC4;)&#x7ED9;APP&#x6307;&#x5B9A;&#x9759;&#x6001;&#x4E3B;&#x5C4F;&#x5E55;&#x7684;&#x5FEB;&#x901F;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x4E2A;&#x952E;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#x6570;&#x7EC4;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B57;&#x5178;&#x5305;&#x542B;&#x5173;&#x4E8E;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x9009;&#x9879;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9759;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;&#x7ED9;&#x4F60;&#x7684;APP&#x7528;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#x6570;&#x7EC4;&#x3002;<br><img src="/2016/04/20/3dtouch/966908-a293ac389bddf444.png" alt=""><br>&#x3000;UIApplicationShortcutItems (iOS&#x6570;&#x7EC4;)&#x7ED9;APP&#x6307;&#x5B9A;&#x9759;&#x6001;&#x4E3B;&#x5C4F;&#x5E55;&#x7684;&#x5FEB;&#x901F;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x4E2A;&#x952E;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#x6570;&#x7EC4;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B57;&#x5178;&#x5305;&#x542B;&#x5173;&#x4E8E;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x9009;&#x9879;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9759;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;&#x7ED9;&#x4F60;&#x7684;APP&#x7528;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#x6570;&#x7EC4;&#x3002;<br><a id="more"></a><br>&#x9759;&#x6001;&#x5B9A;&#x4E49;&#x5FEB;&#x901F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5E38;&#x7528;&#x7684;key:<br>UIApplicationShortcutItemType (&#x5FC5;&#x987B;&#x4F7F;&#x7528;) &#x7528;&#x6765;&#x533A;&#x5206;&#x4E0E;&#x5176;&#x4ED6;&#x5FEB;&#x901F;&#x9009;&#x9879;&#x7684;&#x5206;&#x7C7B;<br>UIApplicationShortcutItemTitle (&#x5FC5;&#x987B;&#x4F7F;&#x7528;) &#x5FEB;&#x901F;&#x9009;&#x9879;&#x663E;&#x793A;&#x7684;&#x6807;&#x9898;<br>UIApplicationShortcutItemSubtitle &#x5FEB;&#x901F;&#x9009;&#x9879;&#x663E;&#x793A;&#x7684;&#x5B50;&#x6807;&#x9898;<br>UIApplicationShortcutItemIconType &#x56FE;&#x7247;&#x7C7B;&#x578B;&#x7531;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#xFF08; iOS9.1&#x4E4B;&#x540E;&#x65B0;&#x6DFB;&#x52A0;&#x4E86;&#x8BB8;&#x591A;&#x56FE;&#x7247;&#x7C7B;&#x578B;&#xFF09;<br>UIApplicationShortcutItemIconFile &#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x56FE;&#x6807;<br>UIApplicationShortcutItemUserInfo &#x9644;&#x52A0;&#x4FE1;&#x606F;</p>
<h4 id="&#x52A8;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;"><a href="#&#x52A8;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;" class="headerlink" title="&#x52A8;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;"></a>&#x52A8;&#x6001;&#x5FEB;&#x901F;&#x9009;&#x9879;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {</span><br><span class="line">UIApplicationShortcutItem * item = [[UIApplicationShortcutItem alloc]initWithType:@&quot;two&quot; localizedTitle:@&quot;&#x641C;&#x7D22;&quot; localizedSubtitle:@&quot;&#x4E00;&#x6B65;&#x5230;&#x8FBE;&#x6307;&#x5B9A;&#x5730;&#x70B9;&quot; icon:[UIApplicationShortcutIcon iconWithType:UIApplicationShortcutIconTypeSearch] userInfo:nil];</span><br><span class="line">UIApplicationShortcutItem * item1 = [[UIApplicationShortcutItem alloc]initWithType:@&quot;three&quot; localizedTitle:@&quot;&#x9644;&#x8FD1;&quot; localizedSubtitle:@&quot;&#x597D;&#x5403;&#x7684;&quot; icon:[UIApplicationShortcutIcon iconWithType:UIApplicationShortcutIconTypeMarkLocation] userInfo:nil];</span><br><span class="line">[UIApplication sharedApplication].shortcutItems = @[item,item1];</span><br></pre></td></tr></table></figure>
<p><img src="/2016/04/20/3dtouch/966908-b0ccf43482e4f83d.png" alt=""></p>
<h4 id="&#x9009;&#x62E9;item&#x540E;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x9009;&#x62E9;item&#x540E;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x9009;&#x62E9;item&#x540E;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;"></a>&#x9009;&#x62E9;item&#x540E;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> - (void)application:(UIApplication *)application performActionForShortcutItem:(nonnull     UIApplicationShortcutItem *)shortcutItem completionHandler:(nonnull void   (^)(BOOL))completionHandler{</span><br><span class="line">&#x3000;&#x3000;//&#x901A;&#x8FC7;shortcutItem.type&#x6765;&#x5224;&#x65AD;&#x70B9;&#x51FB;&#x7684;&#x662F;&#x54EA;&#x4E00;&#x4E2A;item&#xFF0C;&#x6765;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;</span><br><span class="line">  if ([shortcutItem.type isEqualToString:@&quot;one&quot;]) {</span><br><span class="line">        UITabBarController *mytab = (UITabBarController*)self.window.rootViewController;</span><br><span class="line">        mytab.selectedIndex = 0;</span><br><span class="line">    }else if ([shortcutItem.type isEqualToString:@&quot;two&quot;]){</span><br><span class="line">        SearchVC *searchVC = [[SearchVC alloc]init];</span><br><span class="line">        UITabBarController *mytab = (UITabBarController*)self.window.rootViewController;</span><br><span class="line">        UINavigationController *myNAV = [mytab.viewControllers firstObject];</span><br><span class="line">      [myNAV pushViewController:searchVC animated:YES];</span><br><span class="line">// [self.window.rootViewController presentViewController:searchVC animated:YES completion:nil];</span><br><span class="line">  }else{</span><br><span class="line">      FPHNearbyVC *vc = [[FPHNearbyVC alloc] init];</span><br><span class="line">      UITabBarController *mytab = (UITabBarController*)self.window.rootViewController;</span><br><span class="line">      UINavigationController *myNAV = [mytab.viewControllers firstObject];</span><br><span class="line">      vc.hidesBottomBarWhenPushed = YES;</span><br><span class="line">       [myNAV pushViewController:vc animated:YES];</span><br><span class="line">     }</span><br><span class="line">     completionHandler(YES);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h4 id="APP&#x5185;&#x90E8;peek&#x548C;pop&#x7684;&#x4F7F;&#x7528;&#xFF08;&#x4EE5;tableView&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x4E3A;&#x4F8B;&#xFF09;"><a href="#APP&#x5185;&#x90E8;peek&#x548C;pop&#x7684;&#x4F7F;&#x7528;&#xFF08;&#x4EE5;tableView&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x4E3A;&#x4F8B;&#xFF09;" class="headerlink" title="APP&#x5185;&#x90E8;peek&#x548C;pop&#x7684;&#x4F7F;&#x7528;&#xFF08;&#x4EE5;tableView&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x4E3A;&#x4F8B;&#xFF09;"></a>APP&#x5185;&#x90E8;peek&#x548C;pop&#x7684;&#x4F7F;&#x7528;&#xFF08;&#x4EE5;tableView&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x4E3A;&#x4F8B;&#xFF09;</h4><p>&#x3000;&#x3000;&#x9996;&#x5148;&#x9075;&#x5B88;&#x534F;&#x8BAE;UIViewControllerPreviewingDelegate<br>&#x3000;&#x3000;&#x68C0;&#x6D4B;&#x662F;&#x5426;&#x6709;3Dtouch&#xFF1B;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)check3DTouch{</span><br><span class="line">if (self.traitCollection.forceTouchCapability == UIForceTouchCapabilityAvailable)</span><br><span class="line">{</span><br><span class="line">   NSLog(@&quot;3D Touch &#x5F00;&#x542F;&quot;);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">   else{</span><br><span class="line"></span><br><span class="line">      }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>
<p>&#x3000;&#x3000;&#x4E0B;&#x9762;&#x6765;&#x5B9E;&#x73B0;&#x76F8;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//peek&#x7684;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x8F7B;&#x6309;&#x5373;&#x53EF;&#x89E6;&#x53D1;&#x5F39;&#x51FA;vc</span><br><span class="line"> - (UIViewController *)previewingContext:(id &lt;UIViewControllerPreviewing&gt;)previewingContext viewControllerForLocation:(CGPoint)location{</span><br><span class="line">     NSIndexPath *indexPath = [_tableView indexPathForCell:(UITableViewCell* )[previewingContext sourceView]];</span><br><span class="line">//&#x901A;&#x8FC7;[previewingContext sourceView]&#x62FF;&#x5230;&#x5BF9;&#x5E94;&#x7684;cell&#xFF1B;&#x3000;&#x3000;</span><br><span class="line">  NewVC *vc = [[FPHNewHouseDetailVC alloc] init];</span><br><span class="line">  newModel *model= [_tableView objectAtIndex:indexPath.row];</span><br><span class="line">  vc.pid = house.id;</span><br><span class="line"></span><br><span class="line">  NSLog(@&quot;%@&quot;,location);</span><br><span class="line">  return vc;</span><br><span class="line">   }</span><br><span class="line">//pop&#x7684;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x6B64;&#x5904;&#x53EF;&#x5BF9;&#x5C06;&#x8981;&#x8FDB;&#x5165;&#x7684;vc&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x6BD4;&#x5982;&#x9690;&#x85CF;tabBar&#xFF1B;</span><br><span class="line"> - (void)previewingContext:(id &lt;UIViewControllerPreviewing&gt;)previewingContext commitViewController:(UIViewController *)viewControllerToCommit</span><br><span class="line"> {</span><br><span class="line">     viewControllerToCommit.hidesBottomBarWhenPushed = YES;</span><br><span class="line">    [self showViewController:viewControllerToCommit sender:self];</span><br><span class="line"> }</span><br></pre></td></tr></table></figure></p>
<p> <strong>&#x6CE8;&#x610F;&#xFF1A;</strong>tableView&#x5728;<br>&#x3000;&#x3000;&#x3000;&#x3000;- (UITableViewCell<em>)tableView:(UITableView </em>)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath<br>&#x3000;&#x3000;&#x65B9;&#x6CD5;&#x4E2D;&#x4E00;&#x5B9A;&#x8981;&#x5BF9;&#x6BCF;&#x4E2A;cell&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;<br>&#x3000;&#x3000;[self registerForPreviewingWithDelegate:self sourceView:cell];</p>
<h4 id="&#x9884;&#x89C8;&#x65F6;&#x5E95;&#x90E8;&#x83DC;&#x5355;&#x7684;&#x6DFB;&#x52A0;"><a href="#&#x9884;&#x89C8;&#x65F6;&#x5E95;&#x90E8;&#x83DC;&#x5355;&#x7684;&#x6DFB;&#x52A0;" class="headerlink" title="&#x9884;&#x89C8;&#x65F6;&#x5E95;&#x90E8;&#x83DC;&#x5355;&#x7684;&#x6DFB;&#x52A0;"></a>&#x9884;&#x89C8;&#x65F6;&#x5E95;&#x90E8;&#x83DC;&#x5355;&#x7684;&#x6DFB;&#x52A0;</h4><p>&#x5728;&#x8981;&#x9884;&#x89C8;&#x7684;VC&#x4E2D;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-(NSArray&lt;id&lt;UIPreviewActionItem&gt;&gt; *)previewActionItems</span><br><span class="line">{</span><br><span class="line">UIPreviewAction * action1 = [UIPreviewAction actionWithTitle:@&quot;&#x6807;&#x9898;1&quot; style:1 handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) {</span><br><span class="line">    NSLog(@&quot;&#x6807;&#x9898;1&quot;);</span><br><span class="line"> }];</span><br><span class="line"></span><br><span class="line">UIPreviewAction * action2 = [UIPreviewAction actionWithTitle:@&quot;&#x6807;&#x9898;2&quot; style:0 handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) {</span><br><span class="line">    NSLog(@&quot;&#x6807;&#x9898;2&quot;);</span><br><span class="line"></span><br><span class="line"> }];</span><br><span class="line">UIPreviewAction * action3 = [UIPreviewAction actionWithTitle:@&quot;&#x6807;&#x9898;3&quot; style:2 handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) {</span><br><span class="line">NSLog(@&quot;&#x6807;&#x9898;3&quot;);</span><br><span class="line"> }];</span><br><span class="line"></span><br><span class="line">NSArray * actions = @[action1,action2,action3];</span><br><span class="line"></span><br><span class="line">return actions;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x3000;&#x3000;&#x3000;&#x3000;block&#x91CC;&#x9762;&#x76F4;&#x63A5;&#x5199;&#x70B9;&#x51FB;&#x540E;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x64CD;&#x4F5C;<br>&#x6700;&#x7EC8;&#x6548;&#x679C;&#xFF1A;<br><img src="/2016/04/20/3dtouch/966908-976af00f57dd4439.png" alt=""><br> &#x3000;&#x3000;&#x6682;&#x65F6;&#x5C31;&#x5199;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x5BF9;&#x7684;&#x5730;&#x65B9;&#x8BF7;&#x5927;&#x5BB6;&#x6307;&#x6559;&#xFF0C;&#x5927;&#x5BB6;&#x4E92;&#x76F8;&#x5B66;&#x4E60;&#x3002;</p>
]]></content>
    </entry>
    
  
  
</search>
